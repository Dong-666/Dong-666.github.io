<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>计算机网络-应用层 | Dong</title><meta name="description" content="离我们最近的应用层"><meta name="keywords" content="计算机网络"><meta name="author" content="天际线上的猪"><meta name="copyright" content="天际线上的猪"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon3.png"><link rel="canonical" href="http://dong-666.github.io/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="计算机网络-应用层"><meta property="og:url" content="http://dong-666.github.io/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/"><meta property="og:site_name" content="Dong"><meta property="og:description" content="离我们最近的应用层"><meta property="og:image" content="http://dong-666.github.io/img/code.jpg"><meta property="article:published_time" content="2021-04-18T07:28:20.000Z"><meta property="article:modified_time" content="2022-04-17T13:32:10.364Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="大O表示法" href="http://dong-666.github.io/2021/07/20/%E5%A4%A7O%E8%A1%A8%E7%A4%BA%E6%B3%95/"><link rel="next" title="计算机网络-数据链路层" href="http://dong-666.github.io/2021/04/18/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: 天际线上的猪","link":"链接: ","source":"来源: Dong","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: false,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2022-04-17 21:32:10'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Dong" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">103</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">34</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">13</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/te/"><i class="fa-fw fas fa-map"></i><span> 疫情地图</span></a></div><div class="menus_item"><a class="site-page" href="/todolist/"><i class="fa-fw fas fa-check-circle"></i><span> ToDoList</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-camera"></i><span> Gallery</span></a></li></ul></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#特点"><span class="toc-number">1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#域名系统-DNS"><span class="toc-number">2.</span> <span class="toc-text">域名系统 DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#域名系统概述"><span class="toc-number">2.1.</span> <span class="toc-text">域名系统概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#互联网的域名结构"><span class="toc-number">2.2.</span> <span class="toc-text">互联网的域名结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#顶级域名"><span class="toc-number">2.2.1.</span> <span class="toc-text">顶级域名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#域名服务器"><span class="toc-number">2.3.</span> <span class="toc-text">域名服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#根域名服务器"><span class="toc-number">2.3.1.</span> <span class="toc-text">根域名服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#顶级域名服务器"><span class="toc-number">2.3.2.</span> <span class="toc-text">顶级域名服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#权限域名服务器"><span class="toc-number">2.3.3.</span> <span class="toc-text">权限域名服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#本地域名服务器"><span class="toc-number">2.3.4.</span> <span class="toc-text">本地域名服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#提高域名服务器的可靠性"><span class="toc-number">2.3.5.</span> <span class="toc-text">提高域名服务器的可靠性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#域名的解析过程"><span class="toc-number">2.4.</span> <span class="toc-text">域名的解析过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#高速缓存"><span class="toc-number">2.5.</span> <span class="toc-text">高速缓存</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#文件传送协议"><span class="toc-number">3.</span> <span class="toc-text">文件传送协议</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#FTP-概述"><span class="toc-number">3.1.</span> <span class="toc-text">FTP 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#要知道，文件传送可不是一件简单的事情"><span class="toc-number">3.1.1.</span> <span class="toc-text">要知道，文件传送可不是一件简单的事情</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FTP-的基本工作原理"><span class="toc-number">3.2.</span> <span class="toc-text">FTP 的基本工作原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FTP工作特点"><span class="toc-number">3.3.</span> <span class="toc-text">FTP工作特点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#工作步骤"><span class="toc-number">3.3.1.</span> <span class="toc-text">工作步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FTP-使用的两个-TCP-连接"><span class="toc-number">3.3.2.</span> <span class="toc-text">FTP 使用的两个 TCP 连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#简单文件传送协议-TFTP"><span class="toc-number">3.4.</span> <span class="toc-text">简单文件传送协议 TFTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#主要特点"><span class="toc-number">3.4.1.</span> <span class="toc-text">主要特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如同停止等待协议"><span class="toc-number">3.4.2.</span> <span class="toc-text">如同停止等待协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#远程终端协议-TELNET"><span class="toc-number">4.</span> <span class="toc-text">远程终端协议 TELNET</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#工作流程"><span class="toc-number">4.1.</span> <span class="toc-text">工作流程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#万维网-WWW🔺"><span class="toc-number">5.</span> <span class="toc-text">万维网 WWW🔺</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#万维网概述"><span class="toc-number">5.1.</span> <span class="toc-text">万维网概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#工作方式"><span class="toc-number">5.1.1.</span> <span class="toc-text">工作方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#统一资源定位符-URL"><span class="toc-number">5.2.</span> <span class="toc-text">统一资源定位符 URL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#URL-的一般形式"><span class="toc-number">5.2.1.</span> <span class="toc-text">URL 的一般形式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#超文本传送协议-HTTP"><span class="toc-number">5.3.</span> <span class="toc-text">超文本传送协议 HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#万维网的工作过程"><span class="toc-number">5.3.1.</span> <span class="toc-text">万维网的工作过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-的主要特点"><span class="toc-number">5.3.2.</span> <span class="toc-text">HTTP 的主要特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#持续连接"><span class="toc-number">5.3.3.</span> <span class="toc-text">持续连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#工作方式-1"><span class="toc-number">5.3.3.1.</span> <span class="toc-text">工作方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代理服务器（高速缓存）"><span class="toc-number">5.3.4.</span> <span class="toc-text">代理服务器（高速缓存）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-的报文结构"><span class="toc-number">5.3.5.</span> <span class="toc-text">HTTP 的报文结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie"><span class="toc-number">5.3.6.</span> <span class="toc-text">Cookie</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#万维网的文档"><span class="toc-number">5.4.</span> <span class="toc-text">万维网的文档</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#超文本标记语言-HTML"><span class="toc-number">5.4.1.</span> <span class="toc-text">超文本标记语言 HTML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XML"><span class="toc-number">5.4.2.</span> <span class="toc-text">XML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XHTML"><span class="toc-number">5.4.3.</span> <span class="toc-text">XHTML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CSS"><span class="toc-number">5.4.4.</span> <span class="toc-text">CSS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动态万维网文档"><span class="toc-number">5.4.5.</span> <span class="toc-text">动态万维网文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#万维网服务器功能的扩充"><span class="toc-number">5.4.6.</span> <span class="toc-text">万维网服务器功能的扩充</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CGI-程序"><span class="toc-number">5.4.7.</span> <span class="toc-text">CGI 程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#活动万维网文档"><span class="toc-number">5.4.8.</span> <span class="toc-text">活动万维网文档</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#万维网的信息检索系统"><span class="toc-number">5.5.</span> <span class="toc-text">万维网的信息检索系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#全文检索搜索"><span class="toc-number">5.5.1.</span> <span class="toc-text">全文检索搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分类目录搜索"><span class="toc-number">5.5.2.</span> <span class="toc-text">分类目录搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#垂直搜索引擎"><span class="toc-number">5.5.3.</span> <span class="toc-text">垂直搜索引擎</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#博客和微博"><span class="toc-number">5.6.</span> <span class="toc-text">博客和微博</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#博客"><span class="toc-number">5.6.1.</span> <span class="toc-text">博客</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#微博"><span class="toc-number">5.6.2.</span> <span class="toc-text">微博</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#社交网络"><span class="toc-number">5.7.</span> <span class="toc-text">社交网络</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#电子邮件"><span class="toc-number">6.</span> <span class="toc-text">电子邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#电子邮件概述"><span class="toc-number">6.1.</span> <span class="toc-text">电子邮件概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#用户代理-UA-User-Agent"><span class="toc-number">6.1.1.</span> <span class="toc-text">用户代理 UA (User Agent)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#邮件服务器-Mail-Server"><span class="toc-number">6.1.2.</span> <span class="toc-text">邮件服务器 (Mail Server)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#邮件发送和读取协议"><span class="toc-number">6.1.3.</span> <span class="toc-text">邮件发送和读取协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#发送和接收电子邮件的几个重要步骤"><span class="toc-number">6.1.4.</span> <span class="toc-text">发送和接收电子邮件的几个重要步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#电子邮件的组成"><span class="toc-number">6.1.5.</span> <span class="toc-text">电子邮件的组成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#电子邮件地址的格式"><span class="toc-number">6.1.5.1.</span> <span class="toc-text">电子邮件地址的格式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#简单邮件传送协议-SMTP"><span class="toc-number">6.2.</span> <span class="toc-text">简单邮件传送协议 SMTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SMTP-通信的三个阶段"><span class="toc-number">6.2.1.</span> <span class="toc-text">SMTP 通信的三个阶段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#电子邮件的信息格式"><span class="toc-number">6.3.</span> <span class="toc-text">电子邮件的信息格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#邮件读取协议-POP3-和-IMAP"><span class="toc-number">6.4.</span> <span class="toc-text">邮件读取协议 POP3 和 IMAP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#POP3-协议"><span class="toc-number">6.4.1.</span> <span class="toc-text">POP3 协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IMAP-协议"><span class="toc-number">6.4.2.</span> <span class="toc-text">IMAP 协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IMAP-与-POP3-比较"><span class="toc-number">6.4.3.</span> <span class="toc-text">IMAP 与 POP3 比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基于万维网的电子邮件"><span class="toc-number">6.5.</span> <span class="toc-text">基于万维网的电子邮件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通用互联网邮件扩充-MIME"><span class="toc-number">6.6.</span> <span class="toc-text">通用互联网邮件扩充 MIME</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内容类型"><span class="toc-number">6.6.1.</span> <span class="toc-text">内容类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#动态主机配置协议-DHCP"><span class="toc-number">7.</span> <span class="toc-text">动态主机配置协议 DHCP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#租用期-lease-period"><span class="toc-number">7.1.</span> <span class="toc-text">租用期 (lease period)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#简单网络管理协议-SNMP"><span class="toc-number">8.</span> <span class="toc-text">简单网络管理协议 SNMP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#基本概念"><span class="toc-number">8.1.</span> <span class="toc-text">基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#代理"><span class="toc-number">8.1.1.</span> <span class="toc-text">代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#网络管理协议"><span class="toc-number">8.1.2.</span> <span class="toc-text">网络管理协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#简单网络管理协议-SNMP-1"><span class="toc-number">8.1.3.</span> <span class="toc-text">简单网络管理协议 SNMP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#指导思想"><span class="toc-number">8.1.3.1.</span> <span class="toc-text">指导思想</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#基本功能"><span class="toc-number">8.1.3.2.</span> <span class="toc-text">基本功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#委托代理"><span class="toc-number">8.1.4.</span> <span class="toc-text">委托代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SNMP-的网络管理组成"><span class="toc-number">8.1.5.</span> <span class="toc-text">SNMP 的网络管理组成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#管理信息结构-SMI"><span class="toc-number">8.2.</span> <span class="toc-text">管理信息结构 SMI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#被管对象命名"><span class="toc-number">8.2.1.</span> <span class="toc-text">被管对象命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据类型"><span class="toc-number">8.2.2.</span> <span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本编码规则-BER"><span class="toc-number">8.2.3.</span> <span class="toc-text">基本编码规则 BER</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#管理信息库-MIB"><span class="toc-number">8.3.</span> <span class="toc-text">管理信息库 MIB</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SNMP-的协议数据单元和报文"><span class="toc-number">8.4.</span> <span class="toc-text">SNMP 的协议数据单元和报文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#探寻操作"><span class="toc-number">8.4.1.</span> <span class="toc-text">探寻操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#陷阱"><span class="toc-number">8.4.2.</span> <span class="toc-text">陷阱</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SNMP-使用无连接的-UDP"><span class="toc-number">8.4.3.</span> <span class="toc-text">SNMP 使用无连接的 UDP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SNMPv1-定义的协议数据单元-PDU-类型"><span class="toc-number">8.4.4.</span> <span class="toc-text">SNMPv1 定义的协议数据单元 (PDU) 类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SNMP-的报文格式"><span class="toc-number">8.4.5.</span> <span class="toc-text">SNMP 的报文格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Get-request-报文-ASN-1-编码"><span class="toc-number">8.4.6.</span> <span class="toc-text">Get-request 报文 ASN.1 编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Get-request-报文的-BER-编码"><span class="toc-number">8.4.7.</span> <span class="toc-text">Get-request 报文的 BER 编码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#应用进程跨越网络的通信"><span class="toc-number">9.</span> <span class="toc-text">应用进程跨越网络的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#系统调用和应用编程接口"><span class="toc-number">9.1.</span> <span class="toc-text">系统调用和应用编程接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#应用编程接口-API"><span class="toc-number">9.1.1.</span> <span class="toc-text">应用编程接口 API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#几种常用的系统调用"><span class="toc-number">9.2.</span> <span class="toc-text">几种常用的系统调用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#套接字特点及使用"><span class="toc-number">9.2.1.</span> <span class="toc-text">套接字特点及使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#P2P-应用"><span class="toc-number">10.</span> <span class="toc-text">P2P 应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#具有集中目录服务器的-P2P-工作方式"><span class="toc-number">10.1.</span> <span class="toc-text">具有集中目录服务器的 P2P 工作方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#具有全分布式结构的-P2P-文件共享程序"><span class="toc-number">10.2.</span> <span class="toc-text">具有全分布式结构的 P2P 文件共享程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Gnutella"><span class="toc-number">10.2.1.</span> <span class="toc-text">Gnutella</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#eMule"><span class="toc-number">10.2.2.</span> <span class="toc-text">eMule</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BitTorrent"><span class="toc-number">10.2.3.</span> <span class="toc-text">BitTorrent</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P2P-文件分发的分析"><span class="toc-number">10.3.</span> <span class="toc-text">P2P 文件分发的分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在-P2P-对等方中搜索对象"><span class="toc-number">10.4.</span> <span class="toc-text">在 P2P 对等方中搜索对象</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/code.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Dong</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/te/"><i class="fa-fw fas fa-map"></i><span> 疫情地图</span></a></div><div class="menus_item"><a class="site-page" href="/todolist/"><i class="fa-fw fas fa-check-circle"></i><span> ToDoList</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-camera"></i><span> Gallery</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">计算机网络-应用层</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2021-04-18 15:28:20"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2021-04-18</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2022-04-17 21:32:10"><i class="fas fa-history fa-fw"></i> 更新于 2022-04-17</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">18.8k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 57 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><blockquote>
<p>注：内容根据《计算机网络第七版》以及相关PPT整理制作，图片主要源于{电子工程出版社}，部分图片源于学校老师上课所画的图以及自己制作的思维导图</p>
</blockquote>
<h1 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h1><blockquote>
<p>每个应用层协议都是为了解决某一类应用问题，而问题的解决又往往是通过位于不同主机中的多个应用进程之间的通信和协同工作来完成的。应用层的具体内容就是规定应用进程在通信时所遵循的协议。</p>
<p>应用层的许多协议都是基于客户服务器方式。客户 (client) 和服务器 (server) 都是指通信中所涉及的两个应用进程。客户服务器方式所描述的是进程之间服务和被服务的关系。客户是服务请求方，服务器是服务提供方。 </p>
</blockquote>
<h1 id="域名系统-DNS"><a href="#域名系统-DNS" class="headerlink" title="域名系统 DNS"></a>域名系统 DNS</h1><h2 id="域名系统概述"><a href="#域名系统概述" class="headerlink" title="域名系统概述"></a>域名系统概述</h2><p>许多应用层软件经常直接使用域名系统 DNS (Domain Name System)，但计算机的用户只是<strong>间接</strong>而不是直接使用域名系统。 </p>
<p>互联网采用层次结构的命名树作为主机的名字，并使用分布式的域名系统 DNS。</p>
<p>名字到 IP 地址的解析是由若干个域名服务器程序完成的。域名服务器程序在专设的结点上运行，运行该程序的机器称为域名服务器。 </p>
<h2 id="互联网的域名结构"><a href="#互联网的域名结构" class="headerlink" title="互联网的域名结构"></a>互联网的域名结构</h2><p>互联网采用了层次树状结构的命名方法。</p>
<p>任何一个连接在互联网上的主机或路由器，都有一个唯一的层次结构的名字，即域名。</p>
<p>域名的结构由标号序列组成，各标号之间用点隔开：</p>
<blockquote>
<p>… . 三级域名 . 二级域名 . 顶级域名</p>
</blockquote>
<p>各标号分别代表不同级别的域名。 </p>
<p>在这里，域名只是个逻辑概念，并不代表计算机所在的物理地点。</p>
<p>变长的域名和使用有助记忆的字符串，是为了便于人来使用。而 IP 地址是定长的 32 位二进制数字则非常便于机器进行处理。</p>
<p>域名中的“点”和点分十进制 IP 地址中的“点”并无一一对应的关系。点分十进制 IP 地址中一定是包含三个“点”，但每一个域名中“点”的数目则不一定正好是三个。 </p>
<h3 id="顶级域名"><a href="#顶级域名" class="headerlink" title="顶级域名"></a>顶级域名</h3><p>国家顶级域名 nTLD，例如：</p>
<ol>
<li>.cn 表示中国，</li>
<li>.us 表示美国，</li>
<li>.uk 表示英国，等。</li>
</ol>
<p>通用顶级域名 gTLD，最早的顶级域名是：</p>
<ol>
<li>.com（公司和企业）</li>
<li>.net（网络服务机构</li>
<li>.org（非赢利性组织）</li>
<li>.edu（美国专用的教育机构）</li>
<li>.gov（美国专用的政府部门）</li>
<li>.mil（美国专用的军事部门）</li>
<li>.int（国际组织）</li>
</ol>
<p>基础结构域名 </p>
<ol>
<li>这种顶级域名只有一个，即 arpa，用于反向域名解析，因此又称为反向域名。 </li>
</ol>
<p>直接上图表示这些域名关系</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210408200642243.png" alt="image-20210408200642243"></p>
<h2 id="域名服务器"><a href="#域名服务器" class="headerlink" title="域名服务器"></a>域名服务器</h2><p>一个服务器所负责管辖的（或有权限的）范围叫做区 (zone)。</p>
<p>各单位根据具体情况来划分自己管辖范围的区。但在一个区中的所有节点必须是能够连通的。</p>
<p>每一个区设置相应的<strong>权限域名服务器</strong>，用来保存该区中的所有主机的域名到 IP 地址的映射。</p>
<p>DNS 服务器的管辖范围不是以“域”为单位，而是以“区”为单位。 </p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210408200752803.png" alt="image-20210408200752803"></p>
<p>树状结构的 DNS 域名服务器</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210408201212011.png" alt="image-20210408201212011"></p>
<p>域名服务器分为四种：</p>
<ol>
<li>根域名服务器 </li>
<li>顶级域名服务器 </li>
<li>权限域名服务器 </li>
<li>本地域名服务器 </li>
</ol>
<h3 id="根域名服务器"><a href="#根域名服务器" class="headerlink" title="根域名服务器"></a>根域名服务器</h3><p>根域名服务器是最高层次的域名服务器，也是最重要的域名服务器。所有的根域名服务器都知道所有的顶级域名服务器的域名和 IP 地址。</p>
<p>不管是哪一个本地域名服务器，若要对互联网上任何一个域名进行解析，只要自己无法解析，就首先求助于根域名服务器。</p>
<p>在互联网上共有 13 个不同 IP 地址的根域名服务器，它们的名字是用一个英文字母命名，从 a  一直到 m（前 13 个字母）。</p>
<p>这里注意：13个不同IP地址的根域名服务器并不意味着只有13个机器，而是共有13套装置</p>
<pre><code>a.rootservers.net
b.rootservers.net
… 
m.rootservers.net</code></pre><p>到2016年2月，全世界已经在 588 个地点安装了根域名服务器，使世界上大部分 DNS 域名服务器都能就近找到一个根域名服务器。 </p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210408202756097.png" alt="image-20210408202756097"></p>
<blockquote>
<p> 根域名服务器并不直接把域名直接转换成 IP 地址。<br> 在使用迭代查询时，根域名服务器把下一步应当找的顶级域名服务器的 IP 地址告诉本地域名服务器。</p>
</blockquote>
<h3 id="顶级域名服务器"><a href="#顶级域名服务器" class="headerlink" title="顶级域名服务器"></a>顶级域名服务器</h3><p>顶级域名服务器（即 TLD 服务器）负责管理在该顶级域名服务器注册的所有二级域名。</p>
<p>当收到 DNS 查询请求时，就给出相应的回答（可能是最后的结果，也可能是下一步应当找的域名服务器的 IP 地址）。 </p>
<h3 id="权限域名服务器"><a href="#权限域名服务器" class="headerlink" title="权限域名服务器"></a>权限域名服务器</h3><p>负责一个区的域名服务器。</p>
<p>当一个权限域名服务器还不能给出最后的查询回答时，就会告诉发出查询请求的 DNS 客户，下一步应当找哪一个权限域名服务器。 </p>
<h3 id="本地域名服务器"><a href="#本地域名服务器" class="headerlink" title="本地域名服务器"></a>本地域名服务器</h3><p>本地域名服务器对域名系统非常重要。</p>
<p>当一个主机发出 DNS 查询请求时，这个查询请求报文就发送给本地域名服务器。</p>
<p>每一个互联网服务提供者 ISP，或一个大学，甚至一个大学里的系，都可以拥有一个本地域名服务器，这种域名服务器有时也称为默认域名服务器。</p>
<h3 id="提高域名服务器的可靠性"><a href="#提高域名服务器的可靠性" class="headerlink" title="提高域名服务器的可靠性"></a>提高域名服务器的可靠性</h3><p>DNS 域名服务器都把数据复制到几个域名服务器来保存，其中的一个是主域名服务器，其他的是辅助域名服务器。</p>
<p>当主域名服务器出故障时，辅助域名服务器可以保证 DNS 的查询工作不会中断。</p>
<p>主域名服务器定期把数据复制到辅助域名服务器中，而更改数据只能在主域名服务器中进行。这样就保证了数据的一致性。</p>
<h2 id="域名的解析过程"><a href="#域名的解析过程" class="headerlink" title="域名的解析过程"></a>域名的解析过程</h2><p><strong>主机向本地域名服务器的查询一般都是采用递归查询。</strong>如果主机所询问的本地域名服务器不知道被查询域名的 IP 地址，那么本地域名服务器就以 DNS 客户的身份（替前一个主机继续查询），向其他根域名服务器继续发出查询请求报文。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210408204141405.png" alt="image-20210408204141405"></p>
<blockquote>
<p>本地域名服务器向根域名服务器进行递归查询的比较少采用，主要使用下面的迭代查询进行</p>
</blockquote>
<p><strong>本地域名服务器向根域名服务器的查询通常是采用迭代查询。</strong>当根域名服务器收到本地域名服务器的迭代查询请求报文时，要么给出所要查询的 IP 地址，要么告诉本地域名服务器：“你下一步应当向哪一个域名服务器进行查询”。然后让本地域名服务器进行后续的查询。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210408203800415.png" alt="image-20210408203800415"></p>
<h2 id="高速缓存"><a href="#高速缓存" class="headerlink" title="高速缓存"></a>高速缓存</h2><p>每个域名服务器都维护一个高速缓存，存放最近用过的名字以及从何处获得名字映射信息的记录。</p>
<p>可大大减轻根域名服务器的负荷，使互联网上的 DNS 查询请求和回答报文的数量大为减少。 </p>
<p>为保持高速缓存中的内容正确，域名服务器应为每项内容设置计时<br>器，并处理超过合理时间的项（例如，每个项目只存放两天）。</p>
<p>当权限域名服务器回答一个查询请求时，在响应中都指明绑定有效存在的时间值。增加此时间值可减少网络开销，而减少此时间值可提高域名转换的准确性。 </p>
<h1 id="文件传送协议"><a href="#文件传送协议" class="headerlink" title="文件传送协议"></a>文件传送协议</h1><h2 id="FTP-概述"><a href="#FTP-概述" class="headerlink" title="FTP 概述"></a>FTP 概述</h2><p>文件传送协议 FTP (File Transfer Protocol) 是互联网上使用得最广泛的文件传送协议。</p>
<p>FTP 提供交互式的访问，允许客户指明文件的类型与格式，并允许文件具有存取权限。</p>
<p>FTP 屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传送文件。</p>
<p>RFC 959 很早就成为了互联网的正式标准。 </p>
<h3 id="要知道，文件传送可不是一件简单的事情"><a href="#要知道，文件传送可不是一件简单的事情" class="headerlink" title="要知道，文件传送可不是一件简单的事情"></a>要知道，文件传送可不是一件简单的事情</h3><p>网络环境中的一项基本应用就是将文件从一台计算机中复制到另一台可能相距很远的计算机中。</p>
<p>初看起来，在两个主机之间传送文件是很简单的事情。</p>
<p>其实这往往非常困难。原因是众多的计算机厂商研制出的文件系统多达数百种，且差别很大。 </p>
<h2 id="FTP-的基本工作原理"><a href="#FTP-的基本工作原理" class="headerlink" title="FTP 的基本工作原理"></a>FTP 的基本工作原理</h2><p>网络环境下复制文件的复杂性：</p>
<ol>
<li>计算机存储数据的格式不同。</li>
<li>文件的目录结构和文件命名的规定不同。</li>
<li>对于相同的文件存取功能，操作系统使用的命令不同。</li>
<li>访问控制方法不同。 </li>
</ol>
<h2 id="FTP工作特点"><a href="#FTP工作特点" class="headerlink" title="FTP工作特点"></a>FTP工作特点</h2><p>文件传送协议 FTP 只提供文件传送的一些基本的服务，它使用 TCP 可靠的运输服务。</p>
<p>FTP 的主要功能是减少或消除在不同操作系统下处理文件的不兼容性。</p>
<p>FTP 使用客户服务器方式。一个 FTP 服务器进程可同时为多个客户进程提供服务。FTP 的服务器进程由两大部分组成：一个主进程，负责接受新的请求；另外有若干个从属进程，负责处理单个请求。</p>
<h3 id="工作步骤"><a href="#工作步骤" class="headerlink" title="工作步骤"></a>工作步骤</h3><ol>
<li><p>打开熟知端口（端口号为 21），使客户进程能够连接上。</p>
</li>
<li><p>等待客户进程发出连接请求。</p>
</li>
<li><p>启动从属进程来处理客户进程发来的请求。从属进程对客户进程的请求处理完毕后即终止，但从属进程在运行期间根据需要还可能创建其他一些子进程。</p>
</li>
<li><p>回到等待状态，继续接受其他客户进程发来的请求。主进程与从属进程的处理是并发地进行。 </p>
</li>
</ol>
<h3 id="FTP-使用的两个-TCP-连接"><a href="#FTP-使用的两个-TCP-连接" class="headerlink" title="FTP 使用的两个 TCP 连接"></a>FTP 使用的两个 TCP 连接</h3><p><strong>控制连接</strong>在整个会话期间一直保持打开，FTP 客户发出的传送请求通过控制连接发送给服务器端的控制进程，但控制连接不用来传送文件。</p>
<p>实际用于传输文件的是<strong>“数据连接”</strong>。服务器端的控制进程在接收到 FTP 客户发送来的文件传输请求后就创建“数据传送进程”和“数据连接”，用来连接客户端和服务器端的数据传送进程。</p>
<p><strong>数据传送进程实际完成文件的传送</strong>，在传送完毕后关闭“数据传送连接”并结束运行。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210408214816503.png" alt="image-20210408214816503"></p>
<p>那么这个过程是否就需要占用两个端口号来建立两个不同的连接嘞，答案是肯定的</p>
<ol>
<li>当客户进程向服务器进程发出建立连接请求时，要寻找连接服务器进程的熟知端口 (21)，同时还要告诉服务器进程自己的另一个端口号码，用于建立数据传送连接。</li>
<li>接着，服务器进程用自己传送数据的熟知端口 (20) 与客户进程所提供的端口号码建立数据传送连接。</li>
<li>由于 FTP 使用了两个不同的端口号，所以数据连接与控制连接不会发生混乱。</li>
</ol>
<p>这样的好处是啥</p>
<ol>
<li>使协议更加简单和更容易实现。</li>
<li>在传输文件时还可以利用控制连接（例如，客户发送请求终止传输）。</li>
</ol>
<h2 id="简单文件传送协议-TFTP"><a href="#简单文件传送协议-TFTP" class="headerlink" title="简单文件传送协议 TFTP"></a>简单文件传送协议 TFTP</h2><p>TFTP (Trivial File Transfer Protocol) 是一个很小且易于实现的文件传送协议。</p>
<p>TFTP 使用客户服务器方式和使用 UDP 数据报，因此 TFTP 需要有自己的差错改正措施。</p>
<p>TFTP 只支持文件传输而不支持交互。</p>
<p>TFTP 没有一个庞大的命令集，没有列目录的功能，也不能对用户进行身份鉴别。 </p>
<h3 id="主要特点"><a href="#主要特点" class="headerlink" title="主要特点"></a>主要特点</h3><ul>
<li>每次传送的数据 PDU 中有 512 字节的数据，但最后一次可不足 512 字节。</li>
<li>数据 PDU 也称为文件块 (block)，每个块按序编号，从 1 开始。</li>
<li>支持 ASCII 码或二进制传送。</li>
<li>可对文件进行读或写。</li>
<li>使用很简单的首部。 </li>
</ul>
<h3 id="如同停止等待协议"><a href="#如同停止等待协议" class="headerlink" title="如同停止等待协议"></a>如同停止等待协议</h3><ul>
<li>发送完一个文件块后就等待对方的确认，确认时应指明所确认的块编号。</li>
<li>发完数据后<strong>在规定时间内收不到确认就要重发数据 PDU</strong>。</li>
<li>发送确认 PDU 的一方<strong>若在规定时间内收不到下一个文件块，也要重发确认 PDU</strong>。这样就可保证文件的传送不致因某一个数据报的丢失而告失败。 </li>
<li>开始工作时，TFTP 客户进程发送一个读请求 PDU 或写请求 PDU 给 TFTP 服务器进程，其熟知端口号码为  69。</li>
<li>TFTP 服务器进程要选择一个新的端口和 TFTP 客户进程进行通信。</li>
<li>若文件长度恰好为 512 字节的整数倍，则在文件传送完毕后，还必须在最后发送一个只含首部而无数据的数据 PDU。</li>
<li>若文件长度不是 512 字节的整数倍，则最后传送数据 PDU 的数据字段一定不满 512 字节，这正好可作为文件结束的标志。</li>
</ul>
<h1 id="远程终端协议-TELNET"><a href="#远程终端协议-TELNET" class="headerlink" title="远程终端协议 TELNET"></a>远程终端协议 TELNET</h1><p>TELNET 是一个简单的远程终端协议，也是互联网的正式标准。</p>
<p>用户用 TELNET 就可在其所在地通过 TCP 连接注册（即登录）到远地的另一个主机上（使用主机名或 IP 地址）。</p>
<p>TELNET 能将用户的击键传到远地主机，同时也能将远地主机的输出通过 TCP 连接返回到用户屏幕。这种服务是透明的，因为用户感觉到好像键盘和显示器是直接连在远地主机上。 </p>
<p>现在由于 PC 的功能越来越强，用户已较少使用 TELNET 了。</p>
<p>TELNET 也使用客户服务器方式。在本地系统运行 TELNET 客户进程，而在远地主机则运行 TELNET 服务器进程。</p>
<p>和 FTP 的情况相似，服务器中的主进程等待新的请求，并产生从属进程来处理每一个连接。 </p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409070642758.png" alt="image-20210409070642758"></p>
<h2 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h2><p>客户软件把用户的击键和命令转换成 <strong>NVT 格式</strong>，并送交服务器。</p>
<p>服务器软件把收到的数据和命令，从 <strong>NVT 格式转换成远地系统所需的格式</strong>。</p>
<p>向用户返回数据时，服务器把<strong>远地系统的格式转换为 NVT 格式</strong>，本地客户再从 <strong>NVT 格式转换到本地系统所需的格式</strong>。 </p>
<h1 id="万维网-WWW🔺"><a href="#万维网-WWW🔺" class="headerlink" title="万维网 WWW🔺"></a>万维网 WWW🔺</h1><h2 id="万维网概述"><a href="#万维网概述" class="headerlink" title="万维网概述"></a>万维网概述</h2><blockquote>
<p>万维网 WWW (World Wide Web) 并非某种特殊的计算机网络。<br>万维网是一个大规模的、联机式的信息储藏所。<br>万维网用链接的方法能非常方便地从互联网上的一个站点访问另一个站点，从而主动地按需获取丰富的信息。<br>这种访问方式称为“链接”。</p>
</blockquote>
<p>万维网提供分布式服务</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409070913440.png" alt="image-20210409070913440"></p>
<p>万维网是<strong>分布式超媒体 (hypermedia) 系统</strong>，它是<strong>超文本 (hypertext) 系统</strong>的扩充。</p>
<p><strong>一个超文本由多个信息源链接成。</strong>利用一个链接可使用户找到另一个文档。这些文档可以位于世界上任何一个接在互联网上的超文本系统中。超文本是万维网的基础。</p>
<p><strong>超媒体与超文本的区别是文档内容不同。</strong>超文本文档仅包含文本信息，而超媒体文档还包含其他表示方式的信息，如图形、图像、声音、动画，甚至活动视频图像。</p>
<h3 id="工作方式"><a href="#工作方式" class="headerlink" title="工作方式"></a>工作方式</h3><p>万维网以<strong>客户 - 服务器</strong>方式工作。</p>
<p>浏览器就是在用户计算机上的万维网客户程序。万维网文档所驻留的计算机则运行服务器程序，因此这个计算机也称为万维网服务器。</p>
<p>客户程序向服务器程序<strong>发出请求</strong>，服务器程序向客户程序<strong>送回</strong>客户所要的<strong>万维网文档</strong>。</p>
<p>在一个客户程序主窗口上显示出的万维网文档称为页面 (page)。</p>
<p>好的，问题来了，通过以下问题，我们将直接引出后几节的内容</p>
<p>(1) 怎样标志分布在整个互联网上的万维网文档？<br>使用<strong>统一资源定位符 URL</strong> (Uniform Resource Locator) 来标志万维网上的各种文档。使每一个文档在整个互联网的范围内具有唯一的标识符 URL。 </p>
<p>(2) 用何协议实现万维网上各种超链的链接？<br>在万维网客户程序与万维网服务器程序之间进行交互所使用的协议，是<strong>超文本传送协议 HTTP (HyperText Transfer Protocol)</strong>。<br>HTTP 是一个应用层协议，它<strong>使用 TCP 连接进行可靠的传送</strong>。 </p>
<p>(3) 怎样使各种万维网文档都能在互联网上的各种计算机上显示出来，同时使用户清楚地知道在什么地方存在着超链？<br><strong>超文本标记语言 HTML (HyperText Markup Language)</strong> 使得万维网页面的设计者可以很方便地用一个超链从本页面的某处链接到互联网上的任何一个万维网页面，并且能够在自己的计算机屏幕上将这些页面显示出来。 </p>
<p>(4) 怎样使用户能够很方便地找到所需的信息？<br>为了在万维网上方便地查找信息，用户可使用各种<strong>的搜索工具（即搜索引擎）</strong>。 </p>
<h2 id="统一资源定位符-URL"><a href="#统一资源定位符-URL" class="headerlink" title="统一资源定位符 URL"></a>统一资源定位符 URL</h2><p>资源定位符 URL 是对可以从互联网上得到的资源的位置和访问方法的一种简洁表示。<br>URL 给资源的位置提供一种抽象的识别方法，并用这种方法给资源定位。<br>只要能够对资源定位，系统就可以对资源进行各种操作，如存取、更新、替换和查找其属性。<br>URL 相当于一个文件名在网络范围的扩展。因此 <strong>URL 是与互联网相连的机器上的任何可访问对象的一个指针</strong>。 </p>
<h3 id="URL-的一般形式"><a href="#URL-的一般形式" class="headerlink" title="URL 的一般形式"></a>URL 的一般形式</h3><p>由以冒号隔开的两大部分组成，并且在 URL 中的字符对大写或小写没有要求。</p>
<p>注意：对大小写没有要求，也就是说不管你输入home还是HOME，它的意思都是一样的</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409072803806.png" alt="image-20210409072803806"></p>
<p>&lt;主机&gt; 是存放资源的主机在互联网中的域名</p>
<p>现在有些浏览器为了方便用户，在输入 URL 时，可以把最前面的“http://”甚至把主机名最前面的“www”省略，然后浏览器替用户把省略的字符添上。<br>例如，用户只要键入 ypigy.gitee.io，浏览器就自动把未键入的字符补齐，变成<a href="https://ypigy.gitee.io/。" target="_blank" rel="noopener">https://ypigy.gitee.io/。</a></p>
<p><a href="https://ypigy.gitee.io/2021/03/01/%E5%85%AD%E3%80%81Vue%20Router%E5%85%A5%E9%97%A8/#URL" target="_blank" rel="noopener">HTTP格式的URL</a>，点击了解完整url的含义</p>
<h2 id="超文本传送协议-HTTP"><a href="#超文本传送协议-HTTP" class="headerlink" title="超文本传送协议 HTTP"></a>超文本传送协议 HTTP</h2><p>为了使超文本的链接能够高效率地完成，需要用 HTTP 协议来传送一切必须的信息。<br>从层次的角度看，HTTP 是面向事务的 (transaction-oriented) 应用层协议，它是万维网上能够可靠地交换文件（包括文本、声音、图像等各种多媒体文件）的重要基础。 </p>
<h3 id="万维网的工作过程"><a href="#万维网的工作过程" class="headerlink" title="万维网的工作过程"></a>万维网的工作过程</h3><p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409073310895.png" alt="image-20210409073310895"></p>
<p>每个万维网网点都有一个服务器进程，它不断地监听 TCP 的端口 80，以便发现是否有浏览器向它发出连接建立请求。<br>一旦监听到连接建立请求并建立了 TCP 连接之后，浏览器就向万维网服务器发出浏览某个页面的请求，服务器接着就返回所请求的页面作为响应。最后，TCP 连接就被释放了。</p>
<blockquote>
<p>在浏览器和服务器之间的<strong>请求</strong>和<strong>响应</strong>的交互，必须按照规定的格式和遵循一定的规则。<strong>这些格式和规则就是超文本传送协议 HTTP</strong>。</p>
</blockquote>
<p>HTTP 规定在 HTTP 客户与 HTTP 服务器之间的每次交互，都由一个 ASCII 码串构成的请求和一个类似的通用互联网扩充，即“类 MIME (MIME-like)”的响应组成。</p>
<p><strong>最后再强调一遍：HTTP 报文通常都使用 TCP 连接传送。</strong></p>
<h3 id="HTTP-的主要特点"><a href="#HTTP-的主要特点" class="headerlink" title="HTTP 的主要特点"></a>HTTP 的主要特点</h3><ol>
<li>HTTP 使用了<strong>面向连接的 TCP</strong> 作为运输层协议，保证了数据的可靠传输。</li>
<li>HTTP 协议本身也是<strong>无连接的</strong>，虽然它使用了面向连接的 TCP 向上提供的服务。</li>
<li>HTTP 是<strong>面向事务</strong>的客户服务器协议。</li>
<li>HTTP 1.0 协议是<strong>无状态</strong>的 (stateless)。</li>
</ol>
<p>下面我们通过三报文握手来了解http协议的工作</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409082643731.png" alt="image-20210409082643731"></p>
<p>通过图可以看到：http请求报文是作为第三次报文发送的，这时连接也建立好了，服务器就会将请求所需要的资源发送给客户端</p>
<p>这个过程过后，客户端接收到了资源后，便会断开tcp连接，然后下一次需要的时候继续建立连接，然后传递数据，而如果说现在你要请求一个包含很多资源（比如很多图片）的网页，那么客户端首先建立第一次tcp连接用于请求html页面，之后资源收到断开连接后又继续发起一次tcp连接，记住：http连接是无状态，也就意味着你每次建立连接都是全新的，耗时是一样的，且如果需要登录的话，会重复登陆，这次请求是一张图片，接下来还有其它资源，就要重复发起一次又一次的tcp连接，这样会很没有效率，如何解决这个问题呢 </p>
<h3 id="持续连接"><a href="#持续连接" class="headerlink" title="持续连接"></a>持续连接</h3><p><strong>HTTP/1.1 协议使用持续连接 (persistent connection)。</strong></p>
<p>万维网服务器在发送响应后仍然在一段时间内保持这条连接，使同一个客户（浏览器）和该服务器可以继续在这条连接上传送后续的 HTTP 请求报文和响应报文。</p>
<p>这并不局限于传送同一个页面上链接的文档，而是只要这些文档都在同一个服务器上就行。</p>
<p>大部分主流浏览器默认用的就是持久连接</p>
<h4 id="工作方式-1"><a href="#工作方式-1" class="headerlink" title="工作方式"></a>工作方式</h4><p><strong>非流水线方式：</strong>客户在收到前一个响应后才能发出下一个请求。这比非持续连接的两倍 RTT 的开销节省了建立 TCP 连接所需的一个 RTT 时间。但服务器在发送完一个对象后，其 TCP 连接就处于空闲状态，浪费了服务器资源。</p>
<p>这和之前的应用层tcp停止等待协议类似，好比你妈叫你帮忙拿酱油，你屁颠屁颠跑去拿，然后递给妈妈，这时候妈妈又叫你帮忙拿盐，你又屁颠屁颠跑去拿盐，再回来递给妈妈，再然后，你妈又叫你……，就不能一次性说完吗，你愤怒的吼着，这不，你也会流水线方式嘛。</p>
<p><strong>流水线方式：</strong>客户在收到 HTTP 的响应报文之前就能够接着发送新的请求报文。一个接一个的请求报文到达服务器后，服务器就可连续发回响应报文。使用流水线方式时，客户访问所有的对象只需花费一个 RTT时间，使 TCP 连接中的空闲时间减少，提高了下载文档效率。 </p>
<p>老妈一听，哦对吼，拿起一张小纸条，写下要拿的东西，笑眯眯（毫无内疚）的递给你：宝贝你辛苦了，然后你就又屁颠屁颠跑去把几样东西一起拿过来递给妈妈</p>
<p>好的，让我们再看一种情况，如果服务器那边的资源没有更新，而浏览器已经请求过一次服务器的资源了，这时候浏览器这边每次打开该网址都要发起一次tcp连接去重复请求资源，是不是同样浪费资源呢，可不可以把这些没有更改过的资源存起来呢</p>
<h3 id="代理服务器（高速缓存）"><a href="#代理服务器（高速缓存）" class="headerlink" title="代理服务器（高速缓存）"></a>代理服务器（高速缓存）</h3><p>当当当当，便是代理服务器啦</p>
<p>代理服务器 (proxy server) 又称为万维网高速缓存 (Web cache)，它代表浏览器发出 HTTP 请求。</p>
<p>万维网高速缓存把最近的一些请求和响应暂存在本地磁盘中。</p>
<p>当与暂时存放的请求相同的新请求到达时，万维网高速缓存就把暂存的响应发送出去，而不需要按 URL 的地址再去互联网访问该资源。 </p>
<p>让我们来看一张图，在没有高速缓存的情况下，多台主机对资源发起请求</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409084722171.png" alt="image-20210409084722171"></p>
<p>那么这条链路上的时延会很大，因为所有万维网通信量都经过这条链路</p>
<p>那么，使用高速缓存呢</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409085015793.png" alt="image-20210409085015793"></p>
<p>具体步骤为</p>
<p>(1) 浏览器访问互联网的服务器时，要先与校园网的高速缓存建立 TCP 连接，并向高速缓存发出 HTTP 请求报文。</p>
<p>(2) 若高速缓存已经存放了所请求的对象，则将此对象放入 HTTP 响应报文中返回给浏览器。</p>
<p>(3) 否则，高速缓存就代表发出请求的用户浏览器，与互联网上的源点服务器建立 TCP 连接，并发送 HTTP 请求报文。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409085130673.png" alt="image-20210409085130673"></p>
<p>(4) 源点服务器将所请求的对象放在 HTTP 响应报文中返回给校园网的高速缓存。</p>
<p>(5) 高速缓存收到此对象后，先复制在其本地存储器中（为今后使用），然后再将该对象放在 HTTP 响应报文中，通过已建立的 TCP 连接，返回给请求该对象的浏览器。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409085015793.png" alt="image-20210409085015793"></p>
<h3 id="HTTP-的报文结构"><a href="#HTTP-的报文结构" class="headerlink" title="HTTP 的报文结构"></a>HTTP 的报文结构</h3><p>既然客户端要发起请求，是不是要写个什么东西告诉服务器呢，当然要，你要东西你不得先说出来你要啥让被请求方知道嘛，服务器响应也同样要给予客户端响应的，那这个东西是什么</p>
<p>HTTP 有两类报文：<br><strong>请求报文</strong>——从客户向服务器发送请求报文。<br><strong>响应报文</strong>——从服务器到客户的回答。</p>
<p>由于 HTTP 是面向正文的 (text-oriented)，因此在报文中的每一个字段都是一些 ASCII 码串，因而每个字段的长度都是不确定的。</p>
<p>先来看看请求报文的结构</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409085755836.png" alt="image-20210409085755836"></p>
<p>报文由三个部分组成，即开始行、首部行和实体主体。在请求报文中，开始行就是请求行。</p>
<ol>
<li><p>“方法”是面向对象技术中使用的专门名词。所谓“方法”就是对所请求的对象进行的操作，因此这些方法实际上也就是一些命令。因此，请求报文的类型是由它所采用的方法决定的。 </p>
<p>点击<a href="https://ypigy.gitee.io/2020/07/28/http%E5%8D%8F%E8%AE%AE/#%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F" target="_blank" rel="noopener">这里</a>查看请求方法</p>
</li>
<li><p>“URL”是所请求的资源的 URL。</p>
</li>
<li><p>“版本”是 HTTP 的版本。</p>
</li>
</ol>
<p>再来看看响应报文</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409090024473.png" alt="image-20210409090024473"></p>
<p>响应报文的开始行是状态行。状态行包括三项内容，即 HTTP 的版本，状态码，以及解释状态码的简单短语。</p>
<ol>
<li>状态码都是三位数字，具体查看<a href="https://ypigy.gitee.io/2020/07/28/http%E5%8D%8F%E8%AE%AE/#%E7%8A%B6%E6%80%81%E7%A0%81" target="_blank" rel="noopener">这里</a><ul>
<li>1xx 表示通知信息的，如请求收到了或正在进行处理。</li>
<li>2xx 表示成功，如接受或知道了。</li>
<li>3xx 表示重定向，表示要完成请求还必须采取进一步的行动。</li>
<li>4xx 表示客户的差错，如请求中有错误的语法或不能完成。</li>
<li>5xx 表示服务器的差错，如服务器失效无法完成请求。</li>
</ul>
</li>
</ol>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>万维网站点可以使用 Cookie 来跟踪用户。具体可以点击<a href="https://ypigy.gitee.io/2020/07/28/http%E5%8D%8F%E8%AE%AE" target="_blank" rel="noopener">这里</a></p>
<p>Cookie 表示在 HTTP 服务器和客户之间传递的状态信息。<br>使用 Cookie 的网站服务器为用户产生一个唯一的识别码。利用此识别码，网站就能够跟踪该用户在该网站的活动。 </p>
<h2 id="万维网的文档"><a href="#万维网的文档" class="headerlink" title="万维网的文档"></a>万维网的文档</h2><h3 id="超文本标记语言-HTML"><a href="#超文本标记语言-HTML" class="headerlink" title="超文本标记语言 HTML"></a>超文本标记语言 HTML</h3><blockquote>
<p>超文本标记语言 HTML 中的 Markup 的意思就是“设置标记”。</p>
<p>HTML 定义了许多用于排版的命令（即标签）。</p>
<p>HTML 把各种标签嵌入到万维网的页面中。这样就构成了所谓的HTML 文档。HTML 文档是一种可以用任何文本编辑器创建的 ASCII 码文件。 </p>
</blockquote>
<p>仅当 HTML 文档是以 .html 或 .htm 为后缀时，浏览器才对此文档的各种标签进行解释。</p>
<p>如 HTML 文档改换以 .txt 为其后缀，则 HTML 解释程序就不对标签进行解释，而浏览器只能看见原来的文本文件。</p>
<p>当浏览器从服务器读取 HTML 文档后，就按照 HTML 文档中的各种标签，根据浏览器所使用的显示器的尺寸和分辨率大小，重新进行排版并恢复出所读取的页面。详细了解html点击<a href="https://www.runoob.com/html/html-tutorial.html" target="_blank" rel="noopener">这里</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h3><p>XML (Extensible Markup Language) 是可扩展标记语言，它和 HTML 很相似。</p>
<p>但 XML 的设计宗旨是传输数据，而不是显示数据（HTML 是为了在浏览器上显示数据）。</p>
<p>XML 不是要替换 HTML，而是对 HTML 的补充。</p>
<h3 id="XHTML"><a href="#XHTML" class="headerlink" title="XHTML"></a>XHTML</h3><p>XHTML (Extensible HTML) 是可扩展超文本标记语言，它与 HTML 4.01 几乎是相同的。</p>
<p>但 XHTML 是更严格的 HTML 版本，也是一个 W3C 标准（2000年1月），是作为一种 XML 应用被重新定义的 HTML，并将逐渐取代 HTML。</p>
<p>新的浏览器都支持 XHTML。</p>
<h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><p>CSS (Cascading Style Sheets) 是层叠样式表，它是一种样式表语言，用于<a href="https://www.processon.com/view/link/60434587e401fd4f9cba7ccd" target="_blank" rel="noopener">为 HTML 文档定义布局</a>。</p>
<p>CSS 与 HTML 的区别就是：HTML 用于结构化内容，而 CSS 则用于格式化结构化的内容。</p>
<p>通俗的讲便是，html用于定义页面架构，而css则是决定这些</p>
<h3 id="动态万维网文档"><a href="#动态万维网文档" class="headerlink" title="动态万维网文档"></a>动态万维网文档</h3><p>当你在自己电脑上写了一个页面，不包括任何从服务器上请求过来的数据（比如使用AJAX），然后用浏览器打开看的时候，这个时候它便是一个静态页面，如果你把它放到服务器上，那么它也依然是静态页面，因为里面的数据不能也不会发生改变，它是一个死页面</p>
<p><strong>静态文档</strong>是指该文档创作完毕后就存放在万维网服务器中，在被用户浏览的过程中，内容不会改变。 </p>
<p><strong>动态文档</strong>是指文档的内容是在浏览器访问万维网服务器时才由应用程序动态创建。</p>
<p>动态文档和静态文档之间的主要差别体现在服务器一端。这主要是文档内容的生成方法不同。而从浏览器的角度看，这两种文档并没有区别。 </p>
<p>那么，我们如何动态改变页面的显示数据呢，毕竟，一个新闻网站每天的新闻都是新的把，购物网站的商品每天也会推荐给你不同的吧，总不能一天写一个新页面放到服务器上吧</p>
<h3 id="万维网服务器功能的扩充"><a href="#万维网服务器功能的扩充" class="headerlink" title="万维网服务器功能的扩充"></a>万维网服务器功能的扩充</h3><ol>
<li><p>增加另一个应用程序，用来处理浏览器发来的数据，并创建动态文档。</p>
</li>
<li><p>增加一个机制，用来使万维网服务器把浏览器发来的数据传送给这个应用程序，然后万维网服务器能够解释这个应用程序的输出，并向浏览器返回 HTML 文档。</p>
</li>
</ol>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409092216962.png" alt="image-20210409092216962"></p>
<p>就是如图所示：使用CGI来创建动态文档，那么CGI是啥</p>
<h3 id="CGI-程序"><a href="#CGI-程序" class="headerlink" title="CGI 程序"></a>CGI 程序</h3><p>CGI 程序的正式名字是 CGI 脚本 (script)。</p>
<p>“脚本”指的是一个程序，它被另一个程序（解释程序）而不是计算机的处理机来解释或执行。</p>
<p>脚本运行起来要比一般的编译程序要慢，因为它的每一条指令先要被另一个程序来处理（这就要一些附加的指令），而不是直接被指令处理器来处理。 </p>
<h3 id="活动万维网文档"><a href="#活动万维网文档" class="headerlink" title="活动万维网文档"></a>活动万维网文档</h3><p>活动文档 (active document) 技术把所有的工作都转移给浏览器端。</p>
<p>每当浏览器请求一个活动文档时，服务器就返回一段程序副本在浏览器端运行。</p>
<p>活动文档程序可与用户直接交互，并可连续地改变屏幕的显示。<br>由于活动文档技术不需要服务器的连续更新传送，对网络带宽的要求也不会太高。 </p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409093246471.png" alt="image-20210409093246471"></p>
<p>JAVA是活动文档技术的一部分，这里不展开，可自行百度</p>
<h2 id="万维网的信息检索系统"><a href="#万维网的信息检索系统" class="headerlink" title="万维网的信息检索系统"></a>万维网的信息检索系统</h2><p>在万维网中用来进行搜索的程序叫做搜索引擎。</p>
<h3 id="全文检索搜索"><a href="#全文检索搜索" class="headerlink" title="全文检索搜索"></a>全文检索搜索</h3><p>全文检索搜索引擎是一种纯技术型的检索工具。它的工作原理是通过搜索软件到互联网上的各网站收集信息，找到一个网站后可以从这个网站再链接到另一个网站。然后按照一定的规则建立一个很大的在线数据库供用户查询。</p>
<p>用户在查询时只要输入关键词，就从已经建立的索引数据库上进行查询（并不是实时地在互联网上检索到的信息）。</p>
<p>著名的有google、baidu 以及bing</p>
<h3 id="分类目录搜索"><a href="#分类目录搜索" class="headerlink" title="分类目录搜索"></a>分类目录搜索</h3><p><strong>分类目录搜索引擎</strong>并不采集网站的任何信息，而是利用各网站向搜索引擎提交的网站信息时填写的关键词和网站描述等信息，经过人工审核编辑后，如果认为符合网站登录的条件，则输入到分类目录的数据库中，供网上用户查询。</p>
<p>分类目录搜索也叫做<strong>分类网站搜索</strong>。 </p>
<p>著名的有雅虎、新浪以及网易</p>
<h3 id="垂直搜索引擎"><a href="#垂直搜索引擎" class="headerlink" title="垂直搜索引擎"></a>垂直搜索引擎</h3><p><strong>垂直搜索引擎 (Vertical Search Engine)</strong> 针对某一特定领域、特定人群或某一特定需求提供搜索服务。<br>垂直搜索也是提供关键字来进行搜索的，但被放到了一个行业知识的上下文中，返回的结果更倾向于信息、消息、条目等。 </p>
<h2 id="博客和微博"><a href="#博客和微博" class="headerlink" title="博客和微博"></a>博客和微博</h2><h3 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h3><p>博客是万维网日志 (weblog) 的简称。也有人把 blog 进行音译，译为“部落格”，或“部落阁”。还有人用“博文”来表示“博客文章”。</p>
<p>Weblog 这个新词是 Jorn Barger 于 1997 年创造的。</p>
<p>简写的 blog（这是今天最常用的术语）则是 Peter Merholz 于 1999 年创造的。</p>
<p>有人把 blog 既当作名词，也当作动词，表示编辑博客或写博客。 </p>
<p>博客已经极大地扩充了互联网的应用和影响 。</p>
<p>在博客出现以前，网民是互联网上内容的消费者。</p>
<p>但博客改变了这种情况，网民不仅是互联网上内容的消费者，而且还是互联网上内容的生产者 。  </p>
<h3 id="微博"><a href="#微博" class="headerlink" title="微博"></a>微博</h3><p>没啥好说的，大部分人都在用，它和博客最大的区别就是，博客更像是一个个人网站，用来写一些比较大型的文章或技术内容，而微博更多则是分享自己的片段、碎语，三言两语</p>
<h2 id="社交网络"><a href="#社交网络" class="headerlink" title="社交网络"></a>社交网络</h2><p>社交网站 SNS (Social Networking Site) 是近年来发展非常迅速的一种网站，其作用是为一群拥有相同兴趣与活动的人创建在线社区</p>
<h1 id="电子邮件"><a href="#电子邮件" class="headerlink" title="电子邮件"></a>电子邮件</h1><h2 id="电子邮件概述"><a href="#电子邮件概述" class="headerlink" title="电子邮件概述"></a>电子邮件概述</h2><p>电子邮件 (e-mail)：指使用电子设备交换的邮件及其方法。电子邮件是互联网上使用得最多的和最受用户欢迎的一种应用。</p>
<p><strong>优点：</strong>使用方便，传递迅速，费用低廉，可以传送多种类型的信息（包括：文字信息，声音和图像等）。</p>
<p>电子邮件的重要标准包括以下部分</p>
<ol>
<li>简单邮件发送协议：SMTP</li>
<li>互联网文本报文格式</li>
<li>通用互联网邮件扩充 MIME</li>
<li>邮件读取协议：POP3 和 IMAP</li>
</ol>
<p>通过以下图片理解邮件通信的各个组成部分</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409100723015.png" alt="image-20210409100723015"></p>
<h3 id="用户代理-UA-User-Agent"><a href="#用户代理-UA-User-Agent" class="headerlink" title="用户代理 UA (User Agent)"></a>用户代理 UA (User Agent)</h3><p>用户代理 UA 就是用户与电子邮件系统的接口，是电子邮件客户端软件。<br>用户代理的功能：撰写、显示、处理和通信。</p>
<p>邮件服务器的功能是发送和接收邮件，同时还要向发信人报告邮件传送的情况（已交付、被拒绝、丢失等）。</p>
<p>邮件服务器按照客户 - 服务器方式工作。邮件服务器需要使用发送和读取两个不同的协议。</p>
<p>用户与电子邮件系统的接口。又被称为电子邮件客户端软件。</p>
<p>基本功能：撰写、显示、处理和通信。</p>
<h3 id="邮件服务器-Mail-Server"><a href="#邮件服务器-Mail-Server" class="headerlink" title="邮件服务器 (Mail Server)"></a>邮件服务器 (Mail Server)</h3><p>又被称为邮件传输代理。</p>
<p>功能：发送和接收邮件，同时还要向发信人报告邮件传送的情况。<br>按照客户 – 服务器方式工作。</p>
<p>在发送和读取邮件时使用两个不同的协议：SMTP，POP3。</p>
<h3 id="邮件发送和读取协议"><a href="#邮件发送和读取协议" class="headerlink" title="邮件发送和读取协议"></a>邮件发送和读取协议</h3><p>邮件发送和读取使用不同的协议协议。</p>
<ol>
<li><p>简单邮件发送协议 SMTP：用于在用户代理向邮件服务器或邮件服务器之间发送邮件。</p>
</li>
<li><p>邮局协议 POP3：用于用户代理从邮件服务器读取邮件。</p>
</li>
</ol>
<p>通信双发既可以是客户也可以是服务器，当你是写信方时，你便是客户，收信方是服务器，放过来便是相反，对方是客户，你是服务器</p>
<p>还要注意的是：<strong>SMTP和POP3（或IMAP）都是使用TCP连接来传送邮件的，目的是为了可靠地传送邮件。</strong></p>
<p>仔细观察下面的图</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409101409058.png" alt="image-20210409101409058"></p>
<p>发送方发送邮件是通过一条跨越互联网的线过去到达服务器端端，所以请注意：<strong>邮件不会在互联网中的某个中间邮件服务器落地</strong></p>
<p>发送方是通过“推（push）”的方式讲邮件发送出去，而接收方则是通过“拉（pull）”的方式接收邮件的</p>
<h3 id="发送和接收电子邮件的几个重要步骤"><a href="#发送和接收电子邮件的几个重要步骤" class="headerlink" title="发送和接收电子邮件的几个重要步骤"></a>发送和接收电子邮件的几个重要步骤</h3><ol>
<li>发件人调用 PC 中的用户代理撰写和编辑要发送的邮件。</li>
<li>发件人的用户代理把邮件用 SMTP 协议发给发送方邮件服务器。</li>
<li>SMTP 服务器把邮件临时存放在邮件缓存队列中，等待发送。</li>
<li>发送方邮件服务器的 SMTP 客户与接收方邮件服务器的 SMTP服务器建立 TCP 连接，然后就把邮件缓存队列中的邮件依次发送出去。 </li>
<li>运行在接收方邮件服务器中的SMTP服务器进 程收到邮件后，把邮件放入收件人的用户邮箱中，等待收件人进行读取。 </li>
<li>收件人在打算收信时，就运行PC机中的用户代理，使用POP3（或 IMAP）协议读取发送给自己的邮件。 </li>
</ol>
<h3 id="电子邮件的组成"><a href="#电子邮件的组成" class="headerlink" title="电子邮件的组成"></a>电子邮件的组成</h3><p>电子邮件由信封 (envelope) 和内容 (content) 两部分组成。</p>
<p>电子邮件的传输程序根据邮件信封上的信息来传送邮件。用户在从自己的邮箱中读取邮件时才能见到邮件的内容。</p>
<p>在邮件的信封上，最重要的就是收件人的地址。 </p>
<h4 id="电子邮件地址的格式"><a href="#电子邮件地址的格式" class="headerlink" title="电子邮件地址的格式"></a>电子邮件地址的格式</h4><blockquote>
<p>收件人邮箱名@邮箱所在主机的域名      </p>
</blockquote>
<p>这便是TCP/IP 体系的电子邮件系统规定电子邮件地址的格式</p>
<p>符号“@”读作“at”，表示“在”的意思。<br>例如电子邮件地址 <a href="mailto:xiexiren@tsinghua.org.cn">xiexiren@tsinghua.org.cn</a></p>
<p>这里要注意两点</p>
<ol>
<li><p>这个用户名（ xiexiren）在该域名的范围内是唯一的。 </p>
</li>
<li><p>邮箱所在的主机的域名（tsinghua.org.cn）在全世界必须是唯一的 </p>
</li>
</ol>
<h2 id="简单邮件传送协议-SMTP"><a href="#简单邮件传送协议-SMTP" class="headerlink" title="简单邮件传送协议 SMTP"></a>简单邮件传送协议 SMTP</h2><p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409100723015.png" alt="image-20210409100723015"></p>
<p>SMTP 规定了在两个相互通信的 SMTP 进程交换信息的方法。</p>
<p>SMTP 使用客户–服务器方式。</p>
<p>SMTP 基于 TCP 实现客户与服务器的通信。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409102248512.png" alt="image-20210409102248512"></p>
<p>SMTP 是一个基于文本的 （即 ASCII 码） 的协议。 </p>
<p>SMTP 客户与服务器之间采用命令-响应方式进行交互。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409102308510.png" alt="image-20210409102308510"></p>
<p>SMTP 基于 TCP 实现客户与服务器之间的通信。</p>
<h3 id="SMTP-通信的三个阶段"><a href="#SMTP-通信的三个阶段" class="headerlink" title="SMTP 通信的三个阶段"></a>SMTP 通信的三个阶段</h3><p><strong>连接建立：</strong>连接是在发送主机的 SMTP 客户和接收主机的 SMTP 服务器之间建立的。SMTP不使用中间的邮件服务器。   </p>
<p><strong>邮件传送</strong></p>
<p><strong>连接释放：</strong>邮件发送完毕后，SMTP 应释放 TCP 连接。 </p>
<p>通过图来理解这个过程（这个过程其实和http协议进行通信有点类似）</p>
<ol>
<li><p>首先是建立连接用于传送邮件</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409102449163.png" alt="image-20210409102449163"></p>
</li>
<li><p>接着就是传送邮件了</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409102751440.png" alt="image-20210409102751440"></p>
</li>
<li><p>然后就是邮件传送完，连接释放</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409102825471.png" alt="image-20210409102825471"></p>
</li>
</ol>
<h2 id="电子邮件的信息格式"><a href="#电子邮件的信息格式" class="headerlink" title="电子邮件的信息格式"></a>电子邮件的信息格式</h2><p>一个电子邮件分为信封和内容两大部分。</p>
<p>RFC 5322 只规定了邮件内容中的首部 (header) 格式，而对邮件的主体 (body) 部分则让用户自由撰写。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409103109432.png" alt="image-20210409103109432"></p>
<p>对图中各个名词进行解释</p>
<ol>
<li>“To:” 后面填入一个或多个收件人的电子邮件地址。用户只需打开地址簿，点击收件人名字，收件人的电子邮件地址就会自动地填入到合适的位置上。</li>
<li>“Subject:” 是邮件的主题。它反映了邮件的主要内容，便于用户查找邮件。</li>
<li>“Cc:”  表示应给某某人发送一个邮件副本。</li>
<li>“From” 和 “Date” 表示发信人的电子邮件地址和发信日期。</li>
<li>“Reply-To” 是对方回信所用的地址。 </li>
</ol>
<h2 id="邮件读取协议-POP3-和-IMAP"><a href="#邮件读取协议-POP3-和-IMAP" class="headerlink" title="邮件读取协议 POP3 和 IMAP"></a>邮件读取协议 POP3 和 IMAP</h2><p>正如标题：现在有两个常用的邮件读取协议：</p>
<ol>
<li>POP3：邮局协议 (Post Office Protocol) 第3个版本 </li>
<li>IMAP：网际报文存取协议 (Internet Message Access Protocol)</li>
</ol>
<p>首先了解下POP3协议</p>
<h3 id="POP3-协议"><a href="#POP3-协议" class="headerlink" title="POP3 协议"></a>POP3 协议</h3><p>POP3 使用客户–服务器方式。</p>
<p>POP3 基于TCP实现客户与服务器的通信。</p>
<p>POP3 支持用户鉴别。</p>
<p><strong>POP3 服务器会删除被用户读取了的邮件。</strong>（也就是阅完即焚）</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409103251660.png" alt="image-20210409103251660"></p>
<h3 id="IMAP-协议"><a href="#IMAP-协议" class="headerlink" title="IMAP 协议"></a>IMAP 协议</h3><p>IMAP 使用客户–服务器方式。</p>
<p>IMAP 基于TCP实现客户与服务器的通信。</p>
<p>IMAP是一个联机协议。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409103428001.png" alt="image-20210409103428001"></p>
<p>IMAP的特点如下</p>
<ol>
<li>连接后只下载<strong>邮件首部</strong>（部分下载）。</li>
<li>用户直接在IMAP服务器上创建和管理文件夹。</li>
<li>用户可以<strong>搜索</strong>邮件内容。</li>
<li>用户可以在不同的地方使用不同的计算机<strong>随时</strong>上网阅读和处理自己的邮件。</li>
<li>允许收信人只读取邮件中的<strong>某一个部分</strong>。</li>
<li><strong>缺点：</strong>要想查阅邮件，必须先联网。</li>
</ol>
<h3 id="IMAP-与-POP3-比较"><a href="#IMAP-与-POP3-比较" class="headerlink" title="IMAP 与 POP3 比较"></a>IMAP 与 POP3 比较</h3><table>
<thead>
<tr>
<th>操作位置</th>
<th>操作内容</th>
<th>IMAP</th>
<th>POP3</th>
</tr>
</thead>
<tbody><tr>
<td>收件箱</td>
<td>阅读、标记、移动、删除邮件等</td>
<td>客户端与邮箱更新同步</td>
<td>仅在客户端内</td>
</tr>
<tr>
<td>发件箱</td>
<td>保存到已发送</td>
<td>客户端与邮箱更新同步</td>
<td>仅在客户端内</td>
</tr>
<tr>
<td>创建文件夹</td>
<td>新建自定义的文件夹</td>
<td>客户端与邮箱更新同步</td>
<td>仅在客户端内</td>
</tr>
<tr>
<td>草稿</td>
<td>保存草稿</td>
<td>客户端与邮箱更新同步</td>
<td>仅在客户端内</td>
</tr>
<tr>
<td>垃圾文件夹</td>
<td>接收并移入垃圾文件夹的邮件</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>广告邮件</td>
<td>接收并移入广告邮件夹的邮</td>
<td>支持</td>
<td>不支持</td>
</tr>
</tbody></table>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409104202426.png" alt="image-20210409104202426"></p>
<p>这里要好好区别，邮件读取协议 POP 或 IMAP 与邮件传送协议 SMTP 完全不同。</p>
<p>发信人的用户代理向源邮件服务器发送邮件，以及源邮件服务器向目的邮件服务器发送邮件，都是使用 SMTP 协议。<br>而 POP 协议或 IMAP 协议则是用户从目的邮件服务器上读取邮件所使用的协议。 </p>
<p>简单来说：发邮件是用<strong>SMTP</strong>协议，而收文件是在<strong>pop3</strong>和<strong>imap</strong>协议中挑一个去收</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409104425895.png" alt="image-20210409104425895"></p>
<h2 id="基于万维网的电子邮件"><a href="#基于万维网的电子邮件" class="headerlink" title="基于万维网的电子邮件"></a>基于万维网的电子邮件</h2><p>用户代理 (UA) 的缺点：必须在计算机中安装用户代理软件可能不能安装或不允许安装。所以会导致不方便收邮件，而且，很重要的是，你要收发文件，两个人都要开着电脑，啊这……</p>
<p>而这时候通过之前学的万维网以及http协议，我们是否可以把这个平台搬到互联网上呢，答案是可以的，你现在的用的邮箱不就是吗，所以，万维网电子邮件的优点是啥</p>
<ul>
<li>不需要在计算机中再安装用户代理软件。</li>
<li>计算机能联网，就能非常方便地收发电子邮件。</li>
<li>电子邮件界面非常友好。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409104824166.png" alt="image-20210409104824166"></p>
<p>通过图可以了解到其有两个特点</p>
<ol>
<li>发送、接收电子邮件时使用 HTTP 协议。</li>
<li>两个邮件服务器之间传送邮件时使用 SMTP。</li>
</ol>
<p>好的，互联网解决了我们之间的电子邮件交流，现在另一个问题来了，我们使用的SMTP协议好像没法发图片或者其他多媒体文件（SMTP 不能传送可执行文件或其他的二进制对象。），这咋整，我想发鸭，而且还有一个问题：SMTP 限于传送 7 位的 ASCII 码。许多其他非英语国家的文字（如中文、俄文，甚至带重音符号的法文或德文）就无法传送。甚至还存在这个问题：SMTP 服务器会拒绝超过一定长度的邮件。那怎么解决呢</p>
<h2 id="通用互联网邮件扩充-MIME"><a href="#通用互联网邮件扩充-MIME" class="headerlink" title="通用互联网邮件扩充 MIME"></a>通用互联网邮件扩充 MIME</h2><p>对的，就是它，它可以帮我们解决上面遇到的问题，那是不是意味着就可以直接用他来取代SMTP呢，并不是这样的</p>
<p>MIME 的意图<strong>是继续使用目前的 [RFC 822] 格式</strong>，但<strong>增加了邮件主体的结构</strong>，并<strong>定义了传送非 ASCII 码的编码规则</strong>。 </p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409105253804.png" alt="image-20210409105253804"></p>
<p>它主要包括三个部分</p>
<ol>
<li><p><strong>5 个新的邮件首部字段</strong>，它们可包含在原有首部中。这些字段提供了有关邮件主体的信息。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409105407947.png" alt="MIME首部"></p>
</li>
<li><p>定义了许多<strong>邮件内容的格式</strong>，对多媒体电子邮件的表示方法进行了标准化。</p>
</li>
<li><p>定义了<strong>传送编码</strong>，可对任何内容格式进行转换，而不会被邮件系统改变。</p>
<table>
<thead>
<tr>
<th>编码方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>7bit</td>
<td>7  位  ASCII  编码，每行不能超过  1000  个字符（包括回车和换行）。缺省编码方法。</td>
</tr>
<tr>
<td>8bit</td>
<td>8  位非  ASCII  编码，每行不能超过  1000  个字节（包括回车和换行）。</td>
</tr>
<tr>
<td>Binary</td>
<td>8  位非  ASCII  编码，任意长度的字节串。</td>
</tr>
<tr>
<td>Base64</td>
<td>将任意长度的字节串转换为用 7 位  ASCII 编码表示的字符串。可用于二进制和非文本数据的编码。</td>
</tr>
<tr>
<td>Quoted-printable</td>
<td>将任意长度的字节串转换为  ASCII  编码表示的字符串。可用于二进制和非文本数据的编码。</td>
</tr>
</tbody></table>
</li>
</ol>
<p>这里对各个编码方法就不继续展开了，详细可以通过书本理解</p>
<h3 id="内容类型"><a href="#内容类型" class="headerlink" title="内容类型"></a>内容类型</h3><p>MIME 着标准规定 Content-Type 说明必须含有两个标识符，即内容类型(type)和子类型(subtype)，中间用“/”分开。 </p>
<p>MIME 标准原先定义了 7 个基本内容类型和 15 种子类型。</p>
<p>MIME允许发件人和收件人自己定义专用的内容类型。但为避免可能出现名字冲突，标准要求为专用的内容类型选择的名字要以字符串 X-开始。</p>
<table>
<thead>
<tr>
<th>内容类型</th>
<th>子类型举例</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>text（文本）</td>
<td>plain, html, xml, css</td>
<td>不同格式的文本</td>
</tr>
<tr>
<td>image（图像）</td>
<td>gif, jpeg, tiff</td>
<td>不同格式的静止图像</td>
</tr>
<tr>
<td>audio（音频）</td>
<td>basic, mpeg, mp4</td>
<td>可听见的声音</td>
</tr>
<tr>
<td>video（视频）</td>
<td>mpeg, mp4, quicktime</td>
<td>不同格式的影片</td>
</tr>
<tr>
<td>model（模型）</td>
<td>vrml</td>
<td>3D模型</td>
</tr>
<tr>
<td>application（应用）</td>
<td>octet-stream, pdf,  javascript, zip</td>
<td>不同应用程序产生的数据</td>
</tr>
<tr>
<td>message（报文）</td>
<td>http, rfc822</td>
<td>封装的报文</td>
</tr>
<tr>
<td>multipart（多部分）</td>
<td>mixed, alternative, parallel, digest</td>
<td>多种类型的组合</td>
</tr>
</tbody></table>
<p>举个例子</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409110200263.png" alt="image-20210409110200263"></p>
<h1 id="动态主机配置协议-DHCP"><a href="#动态主机配置协议-DHCP" class="headerlink" title="动态主机配置协议 DHCP"></a>动态主机配置协议 DHCP</h1><p>互联网广泛使用的动态主机配置协议 DHCP (Dynamic Host Configuration Protocol) 提供了即插即用连网 (plug-and-play networking) 的机制。</p>
<p>这种机制允许一台计算机加入新的网络和获取 IP 地址，而不用手工配置。</p>
<p>DHCP给运行服务器软件、且位置固定的计算机指派一个永久地址，给运行客户端软件的计算机分配一个临时地址。</p>
<p>步骤大致如下</p>
<ol>
<li><p>需要 IP 地址的主机在启动时就向 DHCP 服务器广播发送发现报文（DHCPDISCOVER），这时该主机就成为 DHCP 客户。</p>
<p>为什么要广播，因为这时候A并不知道DHCP服务器是哪一台，所以全都发，而此时它并没有IP地址，所以这个报文的源地址也都会是0</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409111807042.png" alt="image-20210409111807042"></p>
</li>
<li><p>本地网络上所有主机都能收到此广播报文，但只有 DHCP 服务器才回答此广播报文。</p>
</li>
<li><p>DHCP 服务器先在其数据库中查找该计算机的配置信息。</p>
<ul>
<li>若找到，则返回找到的信息。</li>
<li>若找不到，则从服务器的 IP 地址池 (address pool) 中取一个地址分配给该计算机。DHCP服务器的回答报文叫做提供报文（DHCPOFFER）。</li>
</ul>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409111829348.png" alt="image-20210409111829348"></p>
</li>
</ol>
<p>并不是每个网络上都有DHCP服务器，这样会使DHCP服务器的数量太多。现在是每一个网络至少有一个 DHCP 中继代理，它配置了 DHCP 服务器的 IP 地址信息。</p>
<p>当 DHCP 中继代理收到主机发送的发现报文后，就以单播方式向 DHCP 服务器转发此报文，并等待其回答。收到 DHCP 服务器回答的提供报文后，DHCP 中继代理再将此提供报文发回给主机。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409111903379.png" alt="image-20210409111903379"></p>
<h2 id="租用期-lease-period"><a href="#租用期-lease-period" class="headerlink" title="租用期 (lease period)"></a>租用期 (lease period)</h2><p>DHCP 服务器分配给 DHCP 客户的 IP 地址的<strong>临时的</strong>，因此 DHCP 客户只能在一段有限的时间内使用这个分配到的 IP 地址。DHCP 协议称这段时间为<strong>租用期</strong>。<br>租用期的数值应由 DHCP 服务器自己决定。<br>DHCP 客户也可在自己发送的报文中（例如，发现报文）提出对租用期的要求。 </p>
<p>不是很理解为啥要租用，不能分配好了就一直用吗，可能是因为怕使用了该ip地址的主机很久不用导致ip地址浪费吧</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409112048314.png" alt="image-20210409112048314"></p>
<p>梳理图中的过程</p>
<ol>
<li><p>DHCP 服务器被动打开 UDP 端口 67， 等待客户端发来的报文。</p>
</li>
<li><p>DHCP 客户从 UDP 端口 68 发送 DHCP 发现报文 DHCPDISCOVER。</p>
</li>
<li><p>凡收到 DHCP 发现报文的 DHCP 服务器都发出 DHCP 提供报文 DHCPOFFER，因此，DHCP 客户可能收到多个 DHCP 提供报文 。</p>
</li>
<li><p>DHCP 客户从几个 DHCP 服务器中选择其中的一个，并向所选择的 DHCP 服务器发送 DHCP 请求报文 DHCPREQUEST。</p>
</li>
<li><p>被选择的 DHCP 服务器发送确认报文DHCPACK，进入已绑定状态，并可开始使用得到的临时 IP 地址了。</p>
<p>DHCP 客户现在要根据服务器提供的租用期 T 设置两个计时器 T1 和 T2，它们的超时时间分别是 0.5T 和 0.875T。当超时时间到就要请求更新租用期。</p>
</li>
<li><p>租用期过了一半（T1 时间到），DHCP 客户发送请求报文 DHCPREQUEST，要求更新租用期。 </p>
</li>
<li><p>DHCP 服务器若同意，则发回确认报文 DHCPACK。DHCP 客户得到了新的租用期，重新设置计时器。</p>
</li>
<li><p>DHCP 服务器若不同意，则发回否认报 DHCPNACK。这时 DHCP 客户必须立即停止使用原来的 IP 地址，而必须重新申请 IP 地址（回到步骤  ❷）。</p>
<p>若 DHCP 服务器不响应步骤  ❻ 的请求报文 DHCPREQUEST，则在租用期过了 87.5% 时，DHCP 客户必须重新发送请求报文 DHCPREQUEST（重复步骤  ❻），然后又继续后面的步骤。 </p>
</li>
<li><p>DHCP 客户可随时提前终止服务器所提供的租用期，这时只需向 DHCP 服务器发送释放报文 DHCPRELEASE 即可。</p>
</li>
</ol>
<h1 id="简单网络管理协议-SNMP"><a href="#简单网络管理协议-SNMP" class="headerlink" title="简单网络管理协议 SNMP"></a>简单网络管理协议 SNMP</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><blockquote>
<p>网络管理包括对硬件、软件和人力的使用、综合与协调，以便对网络资源进行监视、测试、配置、分析、评价和控制，这样就能以合理的价格满足网络的一些需求，如实时运行性能，服务质量等。网络管理常简称为网管。</p>
</blockquote>
<p>网络管理并不是指对网络进行行政上的管理。网络管理分为五大功能</p>
<ol>
<li>故障管理：故障检测、隔离和纠正。</li>
<li>配置管理：初始化网络、并配置网络。</li>
<li>计费管理：记录网络资源的使用。</li>
<li>性能管理：估价系统资源的运行状况及通信效率等。</li>
<li>网络安全管理：对授权机制、访问控制、加密和加密关键字的管理。</li>
</ol>
<p>网络管理长这样的</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409113609272.png" alt="image-20210409113609272"></p>
<ul>
<li>管理站也常称为网络运行中心 NOC (Network Operations Center)，是网络管理系统的核心。</li>
<li>管理程序在运行时就成为管理进程。</li>
<li>管理站（硬件）或管理程序（软件）都可称为管理者(manager)。Manager 不是指人，而是指机器或软件。</li>
<li>网络管理员 (administrator) 指的是负责网络管理的人员。</li>
<li>大型网络往往实行多级管理，因而有多个管理者，而一个管理者一般只管理本地网络的设备。</li>
<li>被管对象<ul>
<li>网络的每一个被管设备中可能有多个被管对象。</li>
<li>被管设备有时可称为网络元素或网元。</li>
<li>在被管设备中也会有一些不能被管的对象。 </li>
</ul>
</li>
</ul>
<h3 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h3><p>在每一个被管设备中都要运行一个程序以便和管理站中的管理程序进行通信。这些运行着的程序叫做网络管理代理程序，或简称为代理。</p>
<p>代理程序在管理程序的命令和控制下在被管设备上采取本地的行动。</p>
<h3 id="网络管理协议"><a href="#网络管理协议" class="headerlink" title="网络管理协议"></a>网络管理协议</h3><p>网络管理协议简称为网管协议。</p>
<p>网络管理协议是管理程序和代理程序之间进行通信的规则。</p>
<p>网络管理员利用网络管理协议，通过管理站对网络中的被管设备进行管理。 </p>
<p>需要注意的是，网管协议本身不管理网络。</p>
<h3 id="简单网络管理协议-SNMP-1"><a href="#简单网络管理协议-SNMP-1" class="headerlink" title="简单网络管理协议 SNMP"></a>简单网络管理协议 SNMP</h3><p>简单网络管理协议SNMP (Simple Network Management Protocol) 中的管理程序和代理程序按客户–服务器方式工作。</p>
<p>管理程序运行 SNMP 客户程序，向某个代理程序发出请求（或命令），代理程序运行 SNMP 服务器程序，返回响应（或执行某个动作）。</p>
<p>在网管系统中，往往是一个（或少数几个）客户程序与很多的服务器程序进行交互。</p>
<h4 id="指导思想"><a href="#指导思想" class="headerlink" title="指导思想"></a>指导思想</h4><ul>
<li>SNMP 最重要的指导思想就是要尽可能简单。</li>
<li>SNMP 的基本功能包括监视网络性能、检测分析网络差错和配置网络设备等。</li>
<li>在网络正常工作时，SNMP 可实现统计、配置、和测试等功能。当网络出故障时，可实现各种差错检测和恢复功能。</li>
<li>虽然 SNMP 是在 TCP/IP 基础上的网络管理协议，但也可扩展到其他类型的网络设备上。 </li>
</ul>
<h4 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h4><ol>
<li>监视网络性能</li>
<li>检测分析网络差错</li>
<li>配置网络设备等。</li>
</ol>
<h3 id="委托代理"><a href="#委托代理" class="headerlink" title="委托代理"></a>委托代理</h3><p>整个系统必须有一个管理站。</p>
<p>若网络元素使用的不是 SNMP 而是另一种网络管理协议，SNMP 协议就无法控制该网络元素。这时可使用委托代理 (proxy agent)。</p>
<p>委托代理能提供协议转换和过滤操作等功能，对被管对象进行管理。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409114208398.png" alt="image-20210409114208398"></p>
<h3 id="SNMP-的网络管理组成"><a href="#SNMP-的网络管理组成" class="headerlink" title="SNMP 的网络管理组成"></a>SNMP 的网络管理组成</h3><ol>
<li>SNMP 本身</li>
<li>管理信息结构 SMI (Structure of Management Information)</li>
<li>管理信息库 MIB (Management Information Base)。</li>
</ol>
<h2 id="管理信息结构-SMI"><a href="#管理信息结构-SMI" class="headerlink" title="管理信息结构 SMI"></a>管理信息结构 SMI</h2><blockquote>
<p>功能：</p>
<ol>
<li>被管对象应怎样命名；</li>
<li>用来存储被管对象的数据类型有哪些；</li>
<li>在网络上传送的管理数据应如何编码。 </li>
</ol>
</blockquote>
<p>SMI 定义了命名对象和定义对象类型（包括范围和长度）的通用规则，以及把对象和对象的值进行编码的规则。这样做是为了确保网络管理数据的语法和语义的无二义性。但从 SMI 的名称并不能看出它的功能。SMI 并不定义一个实体应管理的对象数目，也不定义被管对象名以及对象名及其值之间的关联。 </p>
<p>首先从第一个功能，被管对象的命名上来讲</p>
<h3 id="被管对象命名"><a href="#被管对象命名" class="headerlink" title="被管对象命名"></a>被管对象命名</h3><p><strong>SMI 规定所有被管对象必须在命名树上</strong>，如下图</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411101957301.png" alt="image-20210411101957301"></p>
<p>SMI 标准指明：所有的 MIB 变量必须使用抽象语法记法 1（ASN.1）来定义。<br>SMI 既是 ASN.1 的子集，又是 ASN.1 的超集。<br>ASN.1 的记法很严格，它使得数据的含义不存在任何可能的二义性。</p>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411102208973.png" alt="image-20210411102208973"></p>
<p>SMI 把数据类型分为两大类（如下图）：</p>
<ol>
<li>简单类型</li>
<li>结构化类型。 </li>
</ol>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411102306749.png" alt="image-20210411102306749"></p>
<h3 id="基本编码规则-BER"><a href="#基本编码规则-BER" class="headerlink" title="基本编码规则 BER"></a>基本编码规则 BER</h3><p>ISO 在制订 ASN.1 语言的同时也为它定义了一种标准的编码方案，即基本编码规则 BER (Basic Encoding Rule)。<br>BER 指明了每种数据类型中每个数据的值的表示。<br>发送端用 BER 编码，可将用 ASN.1 所表述的报文转换成唯一的比特序列。<br>接收端用 BER 进行解码，得到该比特序列所表示的 ASN.1 报文。 </p>
<p> ASN.1把所有的数据元素都表示为T-L-V三个字段的组成的序列，T字段定义数据的类型，L字段定义V字段的长度，V字段定义数据值</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411102353190.png" alt="image-20210411102353190"></p>
<p><strong>TLV 中的 T 字段定义数据的类型</strong></p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411102504033.png" alt="image-20210411102504033"></p>
<p><strong>L 字段定义 V 字段的长度</strong></p>
<p>单字节的L字段第一位为0，后续七位定义V字段的长度</p>
<p>当L字段为多字节时，其最高为时1，后面七位定义后续字节的字节数（二进制整数表示），这时，所有后续字节并置起来的二进制整数定义V字段的长度</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411102742467.png" alt="image-20210411102742467"></p>
<p><strong>V 字段定义数据的值</strong></p>
<table>
<thead>
<tr>
<th>类   型</th>
<th>大   小</th>
<th>说      明</th>
</tr>
</thead>
<tbody><tr>
<td>INTEGER</td>
<td>4 字节</td>
<td>在 –231 到  231  – 1  之间的整数</td>
</tr>
<tr>
<td>Interger32</td>
<td>4 字节</td>
<td>和 INTEGER  相同</td>
</tr>
<tr>
<td>Unsigned32</td>
<td>4 字节</td>
<td>在 0  到  232  – 1  之间的无符号数</td>
</tr>
<tr>
<td>OCTET  STRING</td>
<td>可变</td>
<td>不超过  65535 字节长的字节串</td>
</tr>
<tr>
<td>OBJECT  IDENTIFIER</td>
<td>可变</td>
<td>对象标识符</td>
</tr>
<tr>
<td>IPAddress</td>
<td>4 字节</td>
<td>由 4  个整数组成的IP地址</td>
</tr>
<tr>
<td>Counter32</td>
<td>4 字节</td>
<td>可从  0 增加到 232 的整数；当它到达最大值时就返回到  0</td>
</tr>
<tr>
<td>TimeTicks</td>
<td>4 字节</td>
<td>记录时间的计数值，以  1/100 秒为单位</td>
</tr>
<tr>
<td>BITS</td>
<td>—</td>
<td>比特串</td>
</tr>
<tr>
<td>Opaque</td>
<td>可变</td>
<td>不解释的串</td>
</tr>
</tbody></table>
<p>例如，INTEGER 15，其 T 字段是02， INTEGER 类型要用 4 字节编码。最后得出 TLV 编码为 02 04 00 00 00 0F。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411104028469.png" alt="image-20210411104028469"></p>
<p> V 字段<strong>可嵌套</strong>其他数据元素的 TLV 字段</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411103814658.png" alt="image-20210411103814658"></p>
<h2 id="管理信息库-MIB"><a href="#管理信息库-MIB" class="headerlink" title="管理信息库 MIB"></a>管理信息库 MIB</h2><p>被管对象必须维持可供管理程序读写的若干控制和状态信息。这些信息总称为管理信息库  MIB (Management Information Base) 。<br>管理程序使用 MIB 中这些信息的值对网络进行管理（如读取或重新设置这些值）。<br>只有在 MIB 中的对象才是 SNMP 所能够管理的。</p>
<p><strong>节点 mib-2 所包含的信息类别举例</strong></p>
<table>
<thead>
<tr>
<th>类  别</th>
<th>标 号</th>
<th>所包含的信息</th>
</tr>
</thead>
<tbody><tr>
<td>system</td>
<td>(1)</td>
<td>主机或路由器的操作系统</td>
</tr>
<tr>
<td>interfaces</td>
<td>(2)</td>
<td>各种网络接口</td>
</tr>
<tr>
<td>address  translation</td>
<td>(3)</td>
<td>地址转换（例如，ARP 映射）</td>
</tr>
<tr>
<td>ip</td>
<td>(4)</td>
<td>IP 软件</td>
</tr>
<tr>
<td>icmp</td>
<td>(5)</td>
<td>ICMP  软件</td>
</tr>
<tr>
<td>tcp</td>
<td>(6)</td>
<td>TCP  软件</td>
</tr>
<tr>
<td>udp</td>
<td>(7)</td>
<td>UDP  软件</td>
</tr>
<tr>
<td>egp</td>
<td>(8)</td>
<td>EGP  软件</td>
</tr>
</tbody></table>
<p>MIB <strong>变量的例子</strong></p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411104236265.png" alt="image-20210411104236265"></p>
<h2 id="SNMP-的协议数据单元和报文"><a href="#SNMP-的协议数据单元和报文" class="headerlink" title="SNMP 的协议数据单元和报文"></a>SNMP 的协议数据单元和报文</h2><p>SNMP 的操作只有两种基本的管理功能：</p>
<ol>
<li>“读”操作，用 get 报文来检测各被管对象的状况；</li>
<li>“写”操作，用 set 报文来改变各被管对象的状况。</li>
</ol>
<p>SNMP 的这些功能通过探询操作来实现。</p>
<h3 id="探寻操作"><a href="#探寻操作" class="headerlink" title="探寻操作"></a>探寻操作</h3><blockquote>
<p>探询操作 —— SNMP 管理进程定时向被管理设备周期性地发送探询信息。</p>
</blockquote>
<p>探询的好处：</p>
<ol>
<li>可使系统相对简单。</li>
<li>能限制通过网络所产生的管理信息的通信量。</li>
</ol>
<p>探询的缺点：</p>
<ol>
<li>不够灵活，而且所能管理的设备数目不能太多。</li>
<li>开销也较大。</li>
</ol>
<h3 id="陷阱"><a href="#陷阱" class="headerlink" title="陷阱"></a>陷阱</h3><p><strong>SNMP 不是完全的探询协议，它允许不经过询问就能发送某些信息。这种信息称为陷阱，表示它能够捕捉“事件”。</strong></p>
<p>当被管对象的代理检测到有事件发生时，就检查其门限值。代理只向管理进程报告达到某些门限值的事件（即过滤）。</p>
<p>过滤的好处是：</p>
<ol>
<li>仅在严重事件发生时才发送陷阱；</li>
<li>陷阱信息很简单且所需字节数很少。 </li>
</ol>
<p>使用探询（至少是周期性地）以维持对网络资源的实时监视。<br>同时也采用陷阱机制报告特殊事件，使得 SNMP 成为一种有效的网络管理协议。 </p>
<h3 id="SNMP-使用无连接的-UDP"><a href="#SNMP-使用无连接的-UDP" class="headerlink" title="SNMP 使用无连接的 UDP"></a>SNMP 使用无连接的 UDP</h3><p>SNMP 使用无连接的 UDP。但 UDP 不保证可靠交付。</p>
<p>在运行代理程序的服务器端用熟知端口 161 来接收 get 或 set 报文和发送响应报文（与熟知端口通信的客户端使用临时端口）。<br>运行管理程序的客户端则使用熟知端口 162 来接收来自各代理的 trap 报文。 </p>
<h3 id="SNMPv1-定义的协议数据单元-PDU-类型"><a href="#SNMPv1-定义的协议数据单元-PDU-类型" class="headerlink" title="SNMPv1 定义的协议数据单元 (PDU) 类型"></a>SNMPv1 定义的协议数据单元 (PDU) 类型</h3><p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411104738807.png" alt="image-20210411104738807"></p>
<h3 id="SNMP-的报文格式"><a href="#SNMP-的报文格式" class="headerlink" title="SNMP 的报文格式"></a>SNMP 的报文格式</h3><p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411104820927.png" alt="image-20210411104820927"></p>
<h3 id="Get-request-报文-ASN-1-编码"><a href="#Get-request-报文-ASN-1-编码" class="headerlink" title="Get-request 报文 ASN.1 编码"></a>Get-request 报文 ASN.1 编码</h3><p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411104856701.png" alt="image-20210411104856701"></p>
<p>ASN.1 定义</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411104933471.png" alt="image-20210411104933471"></p>
<h3 id="Get-request-报文的-BER-编码"><a href="#Get-request-报文的-BER-编码" class="headerlink" title="Get-request 报文的 BER 编码"></a>Get-request 报文的 BER 编码</h3><p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411104957973.png" alt="image-20210411104957973"></p>
<p>BER 编码</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210411105021274.png" alt="image-20210411105021274"></p>
<h1 id="应用进程跨越网络的通信"><a href="#应用进程跨越网络的通信" class="headerlink" title="应用进程跨越网络的通信"></a>应用进程跨越网络的通信</h1><h2 id="系统调用和应用编程接口"><a href="#系统调用和应用编程接口" class="headerlink" title="系统调用和应用编程接口"></a>系统调用和应用编程接口</h2><p>大多数操作系统使用系统调用 (system call ) 的机制在应用程序和操作系统之间传递控制权。</p>
<p>对程序员来说，每一个系统调用和一般程序设计中的函数调用非常相似，只是系统调用是<strong>将控制权传递给了操作系统</strong>。 </p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409144949026.png" alt="image-20210409144949026"></p>
<h3 id="应用编程接口-API"><a href="#应用编程接口-API" class="headerlink" title="应用编程接口 API"></a>应用编程接口 API</h3><p>系统调用接口实际上就是应用进程的控制权和操作系统的控制权进行转换的一个接口。</p>
<p>使用系统调用之前要编写一些程序，特别是需要设置系统调用中的许多参数，因此这种系统调用接口又称为应用编程接口 API (Application Programming Interface) 。</p>
<h2 id="几种常用的系统调用"><a href="#几种常用的系统调用" class="headerlink" title="几种常用的系统调用"></a>几种常用的系统调用</h2><p>Berkeley UNIX 操作系统定义了一种 API，它又称为<strong>套接字接口 (socket interface)</strong>。</p>
<p>微软公司在其操作系统中采用了套接字接口  API，形成了一个稍有不同的 API，并称之为  Windows Socket。</p>
<p>AT&amp;T 为其 UNIX 系统 V 定义了一种 API，简写为 TLI (Transport Layer Interface)。 </p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409145218013.png" alt="image-20210409145218013"></p>
<h3 id="套接字特点及使用"><a href="#套接字特点及使用" class="headerlink" title="套接字特点及使用"></a>套接字特点及使用</h3><p>当应用进程需要使用网络进行通信时就发出系统调用，请求操作系统为其创建“套接字”，以便把网络通信所需要的系统资源分配给该应用进程。</p>
<p>操作系统为这些资源的总和用一个叫做套接字描述符的号码来表示。</p>
<p>应用进程所进行的网络操作都必须使用这个套接字描述符。<br>通信完毕后，应用进程通过一个关闭套接字的系统调用通知操作系统回收与该套接字描述符相关的所有资源。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409145449361.png" alt="image-20210409145449361"></p>
<p>下面来讲一下如何通过套接字来调用TCP 提供面向连接的服务</p>
<p>总共分为三个阶段，和运输层的tcp三报文握手类似，结合图理解该过程</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409151143953.png" alt="image-20210409151143953"></p>
<ol>
<li><p><strong>连接建立阶段</strong></p>
<p>当套接字被创建后，它的端口号和 IP 地址都是空的，因此应用进程要<strong>调用 bind</strong>（绑定）来指明套接字的本地地址。在服务器端调用 bind 时就是把熟知端口号和本地 IP 地址填写到已创建的套接字中。这就叫做把本地地址绑定到套接字。</p>
<p>服务器在调用 bind 后，还必须<strong>调用 listen</strong>（收听）把套接字设置为被动方式，以便随时接受客户的服务请求。<strong>UDP 服务器由于只提供无连接服务，不使用 listen 系统调用。</strong></p>
<p>服务器紧接着就<strong>调用 accept（接受）</strong>，以便把远地客户进程发来的连接请求提取出来。系统调用 accept 的一个变量就是要指明从哪一个套接字发起的连接。 </p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409151632523.png" alt="image-20210409151632523"></p>
</li>
<li><p><strong>数据传送阶段</strong></p>
<p>客户和服务器都在 TCP 连接上使用 <strong>send 系统调用传送数据</strong>，使用 <strong>recv 系统调用接收数据</strong>。</p>
<p>通常客户使用 send 发送请求，而服务器使用 send 发送回答。<br>服务器使用 recv 接收客户用 send 调用发送的请求。客户在发完请求后用 recv 接收回答。</p>
</li>
<li><p><strong>连接释放阶段</strong></p>
<p>一旦客户或服务器结束使用套接字，就把套接字撤消。这时就调用 <strong>close 释放连接</strong>和<strong>撤销套接字</strong>。</p>
</li>
</ol>
<h1 id="P2P-应用"><a href="#P2P-应用" class="headerlink" title="P2P 应用"></a>P2P 应用</h1><h2 id="具有集中目录服务器的-P2P-工作方式"><a href="#具有集中目录服务器的-P2P-工作方式" class="headerlink" title="具有集中目录服务器的 P2P 工作方式"></a>具有集中目录服务器的 P2P 工作方式</h2><p>在 P2P 工作方式下，所有的音频/视频文件都是在普通的互联网用户之间传输。</p>
<p>这种工作方式解决了集中式媒体服务器可能出现的瓶颈问题。</p>
<p>在互联网流量中，P2P 工作方式下的文件分发已占据了最大的份额，比万维网应用所占的比例大得多</p>
<p>世界上最早使用P2P方式的是<strong>Napster</strong>，Napster 将所有音乐文件的索引信息都集中存放在 Napster 目录服务器中。使用者只要查找目录服务器，就可知道应从何处下载所要的MP3文件。用户要及时向 Napster 的目录服务器报告自己存有的音乐文件。Napster 的文件传输是分散的，文件的定位则是集中的。</p>
<p>让我们通过一张图理解该过程</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409155704154.png" alt="image-20210409155704154"></p>
<ol>
<li>用户 X 向 Napster 目录服务器查询（客户–服务器方式）谁有音乐文件 MP3#。</li>
<li>Napster 目录服务器回答 X：有三个地点有文件 MP3#，即 A, B 和 C（给出了这三个地点的IP地址）。于是用户 X 得知所需的文件 MP3# 的三个下载地点。</li>
<li>用户 X 可以随机地选择三个地点中的任一个。假定 X 向 A 发送下载文件 MP3#的请求报文。双方都使用 P2P 方式通信。</li>
<li>对等方A（现在作为服务器）把文件MP3#发送给X。</li>
</ol>
<p><strong>集中式目录服务器同样也存在问题：可靠性差。会成为性能的瓶颈。</strong></p>
<h2 id="具有全分布式结构的-P2P-文件共享程序"><a href="#具有全分布式结构的-P2P-文件共享程序" class="headerlink" title="具有全分布式结构的 P2P 文件共享程序"></a>具有全分布式结构的 P2P 文件共享程序</h2><h3 id="Gnutella"><a href="#Gnutella" class="headerlink" title="Gnutella"></a>Gnutella</h3><p>Gnutella 是第二代 P2P 文件共享程序，采用<strong>全分布方法</strong>定位内容的 P2P 文件共享应用程序。 </p>
<p>Gnutella 与 Napster 最大的区别是：不使用集中式的目录服务器，而是使用<strong>洪泛法</strong>在大量 Gnutella <strong>用户之间进行查询</strong>。</p>
<p>为了不使查询的通信量过大，Gnutella 设计了一种<strong>有限范围的洪泛查询</strong>，以减少<strong>倾注到互联网的查询流量</strong>，但也<strong>影响到查询定位的准确性</strong>。 </p>
<h3 id="eMule"><a href="#eMule" class="headerlink" title="eMule"></a>eMule</h3><p>eMule 使用了一些服务器。这些服务器并不是保存音频/视频文件，而是保存用户的有关信息，因而可以告诉用户从哪些地方可以下载到所需的文件。</p>
<p>eMule 使用了专门定义的文件夹，让用户存放可以和其他用户共享的文件。</p>
<p>eMule 的下载文件规则是鼓励用户向其他用户上传文件。用户上传文件越多，其下载文件的优先级就越高（因而下载就越快）。</p>
<h3 id="BitTorrent"><a href="#BitTorrent" class="headerlink" title="BitTorrent"></a>BitTorrent</h3><p>BitTorrent 所有对等方集合称为一个洪流 (torrent)，下载文件的数据单元为长度固定的文件块 (chunk)。基础设施结点，叫做追踪器 (tracker)。</p>
<p>A 就和这些对等方建立了 TCP 连接。所有与 A 建立了 TCP 连接的对等方为“相邻对等方”(neighboring peers)。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409161511009.png" alt="image-20210409161511009"></p>
<p>在请求的过程中，A 使用最稀有的优先 (rarest first) 的技术，首先向其相邻对等方请求对应的文件块。<br>所谓稀有是指：如果A所缺少的文件块在相邻对等方中的副本很少，那就是“很稀有的”。</p>
<p>而当很多对等方需要请求文件块时，A如何决定先向谁提供呢？<br>凡当前以最高数据率向 A 传送文件块的某相邻对等方，A 就优先把所请求的文件块传送给该相邻对等方（原来计算机也这么现实）</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409161524959.png" alt="image-20210409161524959"></p>
<p>从互联网传送数据到主机，叫做<strong>下载 (download)</strong>，从主机向互联网传送，则称为<strong>上传 (upload) 或上载</strong>。</p>
<h2 id="P2P-文件分发的分析"><a href="#P2P-文件分发的分析" class="headerlink" title="P2P 文件分发的分析"></a>P2P 文件分发的分析</h2><p>让我们来分析下传统的客户-服务器方式下进行数据请求的过程（结合图中的变量名）</p>
<p>有 N 台主机从服务器下载一个大文件，其长度为 F bit。假定主机与互联网连接的链路的上传速率和下载速率分别为 ui 和 di ，单位都是 bit/s。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409161917270.png" alt="image-20210409161917270"></p>
<p>从服务器端考虑，所有主机分发完毕的最短时间 Tcs 不可能小于 NF/us （每次都要建立连接）；<br>下载速率最慢的主机的下载速率为 dmin，则 Tcs 不可能小于 F/dmin  。<br>由此可得出所有主机都下载完文件 F 的最少时间是：</p>
<blockquote>
<p>Tcs = max（ NF/us，F/dmin ）</p>
</blockquote>
<p>而在P2P下的最短时间呢</p>
<p>初始服务器文件分发的最少时间不可能小于 F/us （只需要上传一次）；<br>下载文件分发的最少时间不可能小于 F/dmin ；<br>上载文件分发的最少时间不可能小于 NF/uT ，其中是 uT  是上传速率之和。<br>所有主机都下载完文件 F 的最少时间的下限是：<br>Tp2p &gt;= max（ F/us ， F/dmin， NF/uT  ）</p>
<p><strong>举个栗子比较一下</strong>（好吧其实书里这个例子我没法理解，0.75怎么得出来的搞不懂）</p>
<p>设所有的对等方的上传速率都是 u，并且 F/u = 1 小时。<br>设服务器的上传速率 us = 10u。<br>当 N = 30 时，<br>P2P方式：最少时间的下限是 0.75 小时 &lt; 1 小时（不管 N 多大）。<br>客户−服务器方式：最少时间是 3 小时。</p>
<p>看不懂？那就对了，我也看不懂（大佬给我走开），反正我就这样理解，如果采用传统的客户-服务器模式传输文件，那么你有几个主机需要文件，你就要和服务器建立几次连接，然后服务器上传文件，接着将服务器资源平均分给多台主机，然后传文件，而P2P则是服务器可以先传给一台（当然也可以多台），这时候服务器所有资源都可以给这一台主机（效率提高）单独传文件，然后服务器记录一下这台主机有这个资源，接着这台得到文件的主机可以通过服务器介绍和另外一台主机进行点对点连接传输文件，同时，服务器也可以继续和另一台传文件，如此下去，1变2，2变4，4变8，指数传递，效率提高，速度变快，服务器压力变小，一举多得啊。</p>
<h2 id="在-P2P-对等方中搜索对象"><a href="#在-P2P-对等方中搜索对象" class="headerlink" title="在 P2P 对等方中搜索对象"></a>在 P2P 对等方中搜索对象</h2><p>在前面我们知道：Napster在一个集中式目录服务器中构建的查找数据库虽然很简单，但性能上却有瓶颈。</p>
<p>Gnutella是一种采用全分布方法定位内容的P2P文件共享应用程序，它解决了集中式目录服务器所造成的瓶颈问题。然而Gnutella是在非结构化的覆盖网络中采用查询洪泛的方法来进行查找的，因此查找的效率较低。</p>
<p>现在广泛使用的索引和查找技术叫做分布式散列表 DHT (Distributed Hash Table)。DHT 也可译为分布式哈希表，它是由大量对等方共同维护的散列表。广泛使用的 Chord 算法是美国麻省理工大学于2001 年提出的。</p>
<p>分布式散列表 DHT 利用散列函数，把资源名 K 及其存放的结点 IP 地址 N 都分别映射为资源名标识符 KID 和结点标识符 NID。<br>Chord 把结点按标识符数值从小到大沿顺时针排列成一个环形覆盖网络。</p>
<p>如下图所示</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409162434921.png" alt="image-20210409162434921"></p>
<p>每个资源由 Chord 环上与其标识符值最接近的下一个结点提供服务。</p>
<p>当N13加进来到节点后，N10的下一个节点就会从N20变成N13，从而资源点标识符K12也会移至该N13上</p>
<p>但是这个速度还不够，为了加速查找，在 Chord 环上可以增加一些指针表(finger table)，它又称为路由表或查找器表。对于结点 N4， 第 1 列第 i  行计算（N4 + 2i – 1），得出后继结点。</p>
<p><img src= "/img/loading.gif" data-src="/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/image-20210409162724943.png" alt="image-20210409162724943"></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">天际线上的猪</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://dong-666.github.io/2021/04/18/%E5%BA%94%E7%94%A8%E5%B1%82/">http://dong-666.github.io/2021/04/18/应用层/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://Dong-666.github.io" target="_blank">Dong</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post_share"><div class="social-share" data-image="/img/code.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><button class="reward-button" type="button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.png" alt="wechat" onclick="window.open('/img/wechat.png')"/><div class="post-qr-code__desc">wechat</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="alipay" onclick="window.open('/img/alipay.jpg')"/><div class="post-qr-code__desc">alipay</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/07/20/%E5%A4%A7O%E8%A1%A8%E7%A4%BA%E6%B3%95/"><img class="prev-cover" data-src="/img/algorithm.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">大O表示法</div></div></a></div><div class="next-post pull-right"><a href="/2021/04/18/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/"><img class="next-cover" data-src="/img/code.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">计算机网络-数据链路层</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2021/03/05/物理层/" title="计算机网络-物理层"><img class="relatedPosts_cover" data-src="/img/code.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-05</div><div class="relatedPosts_title">计算机网络-物理层</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/18/数据链路层/" title="计算机网络-数据链路层"><img class="relatedPosts_cover" data-src="/img/code.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-18</div><div class="relatedPosts_title">计算机网络-数据链路层</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/18/计算机网络概述/" title="计算机网络概述"><img class="relatedPosts_cover" data-src="/img/code.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-18</div><div class="relatedPosts_title">计算机网络概述</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/18/运输层/" title="计算机网络-运输层"><img class="relatedPosts_cover" data-src="/img/code.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-18</div><div class="relatedPosts_title">计算机网络-运输层</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/18/网络层/" title="计算机网络-网络层"><img class="relatedPosts_cover" data-src="/img/code.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-18</div><div class="relatedPosts_title">计算机网络-网络层</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/28/http协议/" title="http协议"><img class="relatedPosts_cover" data-src="/img/code.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-28</div><div class="relatedPosts_title">http协议</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div class="comments-items-1" data-name="Valine"><div class="vcomment" id="vcomment"></div><script>function loadvaline () {  
  var requestSetting = function (from,set) {
    var from = from
    var setting = set.split(',').filter(function(item){
    return from.indexOf(item) > -1
    });
    setting = setting.length == 0 ? from :setting;
    return setting
  }

  var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
  var requiredFields = requestSetting(['nick','mail'],'nick,mail')

  function initValine () {
    window.valine = new Valine({
      el:'#vcomment',
      appId: 'K4oel47dX9gLB9DECHDKW5HF-gzGzoHsz',
      appKey: 'FI26zV0So19K2wVMY6Ds4nAA',
      placeholder: 'Please leave your footprints',
      avatar: 'hide',
      meta: guestInfo,
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      requiredFields: requiredFields
    });
  }
  loadScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || false) {
  window.addEventListener('load', loadvaline)
}
else {
  function loadOtherComment () {
    loadvaline()
  }
}</script></div></div></div></article></main><footer id="footer" style="background-image: url(/img/code.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 天际线上的猪</div><div class="footer_custom_text">Hi, Welcome to my blog</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>