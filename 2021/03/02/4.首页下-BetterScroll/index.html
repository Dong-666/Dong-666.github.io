<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>4.é¦–é¡µä¸‹BetterScroll | Dong</title><meta name="author" content="å¤©é™…çº¿ä¸Šçš„çŒª"><meta name="copyright" content="å¤©é™…çº¿ä¸Šçš„çŒª"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="åŸºäºVue2çš„ç§»åŠ¨ç«¯å•†åŸæ¡ˆä¾‹ï¼ˆä»¿è˜‘è‡è¡—ï¼‰">
<meta property="og:type" content="article">
<meta property="og:title" content="4.é¦–é¡µä¸‹BetterScroll">
<meta property="og:url" content="http://dong-666.github.io/2021/03/02/4.%E9%A6%96%E9%A1%B5%E4%B8%8B-BetterScroll/index.html">
<meta property="og:site_name" content="Dong">
<meta property="og:description" content="åŸºäºVue2çš„ç§»åŠ¨ç«¯å•†åŸæ¡ˆä¾‹ï¼ˆä»¿è˜‘è‡è¡—ï¼‰">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://dong-666.github.io/img/code.jpg">
<meta property="article:published_time" content="2021-03-02T05:00:04.000Z">
<meta property="article:modified_time" content="2021-03-21T12:47:44.179Z">
<meta property="article:author" content="å¤©é™…çº¿ä¸Šçš„çŒª">
<meta property="article:tag" content="Vue">
<meta property="article:tag" content="Vueç§»åŠ¨ç«¯å•†åŸ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://dong-666.github.io/img/code.jpg"><link rel="shortcut icon" href="/img/favicon3.png"><link rel="canonical" href="http://dong-666.github.io/2021/03/02/4.%E9%A6%96%E9%A1%B5%E4%B8%8B-BetterScroll/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":false,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":50,"languages":{"author":"ä½œè€…: å¤©é™…çº¿ä¸Šçš„çŒª","link":"é“¾æ¥: ","source":"æ¥æº: Dong","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '4.é¦–é¡µä¸‹BetterScroll',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-21 20:47:44'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Dong" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">106</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">14</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/te/"><i class="fa-fw fas fa-map"></i><span> ç–«æƒ…åœ°å›¾</span></a></div><div class="menus_item"><a class="site-page" href="/todolist/"><i class="fa-fw fas fa-check-circle"></i><span> ToDoList</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> ç”Ÿæ´»</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera"></i><span> Gallery</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/code.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Dong"><span class="site-name">Dong</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/te/"><i class="fa-fw fas fa-map"></i><span> ç–«æƒ…åœ°å›¾</span></a></div><div class="menus_item"><a class="site-page" href="/todolist/"><i class="fa-fw fas fa-check-circle"></i><span> ToDoList</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> ç”Ÿæ´»</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera"></i><span> Gallery</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">4.é¦–é¡µä¸‹BetterScroll</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2021-03-02T05:00:04.000Z" title="å‘è¡¨äº 2021-03-02 13:00:04">2021-03-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2021-03-21T12:47:44.179Z" title="æ›´æ–°äº 2021-03-21 20:47:44">2021-03-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Vue/">Vue</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="4.é¦–é¡µä¸‹BetterScroll"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">è¯„è®ºæ•°:</span><a href="/2021/03/02/4.%E9%A6%96%E9%A1%B5%E4%B8%8B-BetterScroll/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2021/03/02/4.%E9%A6%96%E9%A1%B5%E4%B8%8B-BetterScroll/" itemprop="commentCount"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="Better-scrollä½¿ç”¨"><a href="#Better-scrollä½¿ç”¨" class="headerlink" title="Better-scrollä½¿ç”¨"></a>Better-scrollä½¿ç”¨</h2><p><a target="_blank" rel="noopener" href="https://better-scroll.gitee.io/docs/zh-CN/guide/">å®˜ç½‘ç®€ä»‹</a></p>
<blockquote>
<p>BetterScroll æ˜¯ä¸€æ¬¾é‡ç‚¹è§£å†³ç§»åŠ¨ç«¯ï¼ˆå·²æ”¯æŒ PCï¼‰å„ç§æ»šåŠ¨åœºæ™¯éœ€æ±‚çš„æ’ä»¶ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯å€Ÿé‰´çš„ <a target="_blank" rel="noopener" href="https://github.com/cubiq/iscroll">iscroll</a> çš„å®ç°ï¼Œå®ƒçš„ API è®¾è®¡åŸºæœ¬å…¼å®¹ iscrollï¼Œåœ¨ iscroll çš„åŸºç¡€ä¸Šåˆæ‰©å±•äº†ä¸€äº› feature ä»¥åŠåšäº†ä¸€äº›æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<p>BetterScroll æ˜¯ä½¿ç”¨çº¯ JavaScript å®ç°çš„ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯æ— ä¾èµ–çš„ã€‚</p>
</blockquote>
<p>å› ä¸ºç½‘é¡µåœ¨PCç«¯ä¸Šä½¿ç”¨ä¸»è¦æ˜¯ç”¨é¼ æ ‡æ»šè½®è¿›è¡Œçš„ï¼Œä¸ä¼šå¾ˆå¡ï¼Œè€Œå¦‚æœä½ æ¢åˆ°æ‰‹æœºç«¯ï¼Œè¿›è¡Œé¡µé¢æ»šåŠ¨çš„è¯å°±ä¼šå‘ç°æ˜æ˜¾çš„å¡é¡¿ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å¼•å…¥æ’ä»¶ï¼ˆæˆ–è€…è‡ªå·±å†™ä¸€ä¸ªï¼‰ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯better-scrollï¼Œä¸‹é¢åˆ†ä¸¤éƒ¨åˆ†ä»‹ç»å®ƒçš„åŸºæœ¬ä½¿ç”¨ï¼ˆhtmlé¡µé¢å’Œvueé¡¹ç›®ï¼‰</p>
<h3 id="htmlä½¿ç”¨"><a href="#htmlä½¿ç”¨" class="headerlink" title="htmlä½¿ç”¨"></a>htmlä½¿ç”¨</h3><p>npmä¸‹è½½</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i better-scroll --save</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…<a target="_blank" rel="noopener" href="https://github.com/ustbhuangyi/better-scroll">GitHub</a>ä¸‹è½½</p>
<p>ç„¶åæ‰¾åˆ°distæ–‡ä»¶å¤¹ï¼Œå°†è¯¥æ–‡ä»¶æ‹–å‡ºæ¥ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥jså¼•ç”¨åˆ°è¯¥æ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./better-scroll.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¯¥æ’ä»¶ä¹‹å‰éœ€è¦äº†è§£ä¸€ä¸‹çŸ¥è¯†</p>
<p>ä½ éœ€è¦å°†åŠ å…¥åˆ°æ»šåŠ¨çš„æ ‡ç­¾ç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªdivï¼ˆå…¶å®ƒå•ç‹¬çš„åŒæ ‡ç­¾å…ƒç´ ä¹Ÿå¯ï¼‰ä¸‹ï¼Œä¹‹ååœ¨æ­¤åŸºç¡€ä¸‹å†åŠ ä¸Šä¸€ä¸ªdivæ ‡ç­¾è¿›è¡ŒåŒ…è£¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://better-scroll.gitee.io/docs/assets/images/schematic.png" alt="åŸç†å›¾"></p>
<p>é¡µé¢ç»“æ„ä»£ç æ¼”ç¤ºå¦‚ä¸‹ï¼ˆä½ å¯ä»¥åŠ ä¸Šæ›´å¤šâ€™æ±‰å ¡åŒ…â€™ï¼Œæ‹–åŠ¨ä½“éªŒæ„Ÿæ›´ä½³ï¼‰ï¼Œä½¿ç”¨wrapperåŒ…è£¹contentï¼Œå†åŠ ä¸Šä½ éœ€è¦æ»šåŠ¨çš„å…ƒç´ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div  class=&quot;wrapper&quot;&gt;</span><br><span class="line">  &lt;ul class=&quot;content&quot;&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ğŸ”&lt;/li&gt;	</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°±æ˜¯å…·ä½“çš„jsé€»è¾‘å®ç°äº†</p>
<p>é¦–å…ˆæˆ‘ä»¬è¦newä¸€ä¸ªbetter-scrollï¼Œæˆ‘æŠŠå®ƒç§°ä¸ºbetter-scrollåˆå§‹åŒ–</p>
<p>è¿™é‡Œï¼Œéœ€è¦æ·»åŠ é…ç½®é¡¹</p>
<p><strong>probeType</strong></p>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>number</code></li>
<li><strong>é»˜è®¤å€¼</strong>ï¼š<code>0</code></li>
<li><strong>å¯é€‰å€¼</strong>ï¼š<code>1|2|3</code></li>
<li><strong>ä½œç”¨</strong>ï¼šæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦çŸ¥é“æ»šåŠ¨çš„ä½ç½®ã€‚å½“ probeType ä¸º 1 çš„æ—¶å€™ï¼Œä¼šéå®æ—¶ï¼ˆå±å¹•æ»‘åŠ¨è¶…è¿‡ä¸€å®šæ—¶é—´åï¼‰æ´¾å‘<a target="_blank" rel="noopener" href="https://better-scroll.gitee.io/docs/zh-CN/guide/api.html#scroll">scroll äº‹ä»¶</a>ï¼›å½“ probeType ä¸º 2 çš„æ—¶å€™ï¼Œä¼šåœ¨å±å¹•æ»‘åŠ¨çš„è¿‡ç¨‹ä¸­å®æ—¶çš„æ´¾å‘ scroll äº‹ä»¶ï¼›å½“ probeType ä¸º 3 çš„æ—¶å€™ï¼Œä¸ä»…åœ¨å±å¹•æ»‘åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œè€Œä¸”åœ¨ momentum æ»šåŠ¨åŠ¨ç”»è¿è¡Œè¿‡ç¨‹ä¸­å®æ—¶æ´¾å‘ scroll äº‹ä»¶ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®è¯¥å€¼ï¼Œå…¶é»˜è®¤å€¼ä¸º 0ï¼Œå³ä¸æ´¾å‘ scroll äº‹ä»¶</li>
</ul>
<p><strong>click</strong></p>
<ul>
<li><strong>ç±»å‹</strong>ï¼š<code>boolean</code></li>
<li><strong>é»˜è®¤å€¼</strong>ï¼š<code>false</code></li>
<li><strong>ä½œç”¨</strong>ï¼šBetterScroll é»˜è®¤ä¼šé˜»æ­¢æµè§ˆå™¨çš„åŸç”Ÿ click äº‹ä»¶ã€‚å½“è®¾ç½®ä¸º trueï¼ŒBetterScroll ä¼šæ´¾å‘ä¸€ä¸ª click äº‹ä»¶ï¼Œæˆ‘ä»¬ä¼šç»™æ´¾å‘çš„ event å‚æ•°åŠ ä¸€ä¸ªç§æœ‰å±æ€§ <code>_constructed</code>ï¼Œå€¼ä¸º trueã€‚</li>
</ul>
<p><strong>pullUpLoad</strong></p>
<ul>
<li><strong>ç±»å‹ï¼š</strong> <code>boolean</code></li>
<li><strong>é»˜è®¤å€¼ï¼š</strong>false</li>
<li><strong>ä½œç”¨ï¼š</strong>åŠ¨æ€ç›‘æµ‹ä½ æ˜¯å¦æ»šåŠ¨åˆ°æœ€åº•éƒ¨ï¼ˆåœ¨æœ€æ–°ç‰ˆï¼Œä½ å·²ç»çœ‹ä¸åˆ°è¯¥é…ç½®é¡¹äº†ï¼Œéœ€è¦é€šè¿‡å¼•å…¥æ’ä»¶å»ä½¿ç”¨ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹è½½å®Œæ•´ç‰ˆå»ä½¿ç”¨è¯¥æ’ä»¶ï¼‰</li>
</ul>
<p><code>click</code>è¿™é‡Œè¦è¡¥å……ä¸€ä¸‹ï¼Œå®ƒå¯¹äºæœ¬æ¥å°±è¯¥å…·æœ‰çš„ç‚¹å‡»äº‹ä»¶çš„å…ƒç´ æ˜¯ä¸ä¼šé˜»æ­¢çš„ï¼ˆ<code>button</code>ï¼‰ï¼Œå®ƒä¼šé˜»æ­¢<code>div</code>ã€<code>img</code>ç­‰æ ‡ç­¾çš„ç‚¹å‡»äº‹ä»¶ï¼Œå…¶å®ƒé…ç½®é¡¹å¯ä»¥å»å®˜ç½‘æŸ¥çœ‹å¹¶è¯•è¯•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bs = <span class="title class_">BetterScroll</span>.<span class="title function_">createBScroll</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.wrapper&#x27;</span>), &#123;</span><br><span class="line">     <span class="attr">probeType</span>: <span class="number">1</span>,</span><br><span class="line">     <span class="attr">click</span>: <span class="literal">true</span>,</span><br><span class="line">     <span class="attr">pullUpLoad</span>: <span class="literal">true</span></span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>
<p>ç„¶åä½ å°±å¯ä»¥è¯•è¯•æ»šåŠ¨å•¦ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹åˆ—ä»£ç åŠ¨æ€ç›‘æµ‹å½“å‰æ»šåŠ¨çš„ä½ç½®ï¼ˆ<code>positionä¸ºå½“å‰æ‰€åœ¨åæ ‡</code>ï¼‰ï¼Œç„¶ååšå‡ºå¯¹åº”å¤„ç†ï¼ˆå‰ææ˜¯å¿…é¡»<code>probeType</code>ä¸º2æˆ–3ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bs.<span class="title function_">on</span>(<span class="string">&quot;scroll&quot;</span>, <span class="function">(<span class="params">position</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(position)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>pullingUp</code>å¯ä»¥æ£€æµ‹ä½ æ˜¯å¦åˆ°åº•äº†ï¼ˆå‰æ<code>pullUpLoad: true</code>ï¼‰ï¼Œä½†åªèƒ½æ£€æµ‹ä¸€æ¬¡ï¼Œä¸‹æ¬¡æ»šåŠ¨åˆ°æœ€ä½å°±æ²¡æœ‰äº†ï¼Œä½ å¯ä»¥é€šè¿‡<code>better-scroll</code>çš„<code>finishPullUp()</code>æ–¹æ³•å¤šæ¬¡æ£€æµ‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bs.<span class="title function_">on</span>(<span class="string">&#x27;pullingUp&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ä½ å·²ç»æ‹‰åˆ°åº•äº†&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  bs.<span class="title function_">finishPullUp</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="vueä½¿ç”¨"><a href="#vueä½¿ç”¨" class="headerlink" title="vueä½¿ç”¨"></a>vueä½¿ç”¨</h3><p>è¿™ä¸ªç”¨npmä¸‹è½½å®Œä½¿ç”¨ä¼šæ–¹ä¾¿ç‚¹ï¼ˆä½¿ç”¨CLI4åˆ›å»ºvueé¡¹ç›®ï¼‰</p>
<p>é¡µé¢ç»“æ„è¦æ±‚åŒhtmlçš„ä½¿ç”¨æ–¹å¼</p>
<p>å¼•å…¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ·»åŠ scrollæ’ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BScroll</span> <span class="keyword">from</span> <span class="string">&#x27;better-scroll&#x27;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨vueçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°mountedä¸­å»ä½¿ç”¨è¯¥æ’ä»¶ï¼Œä¸èƒ½åœ¨createdä¸­ä½¿ç”¨ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Œå› ä¸ºå®ƒåˆšåˆå§‹åŒ–å®Œï¼Œé‚£äº›å…ƒç´ æ ‡ç­¾è¿˜æ²¡åŠ è½½ï¼Œç›´æ¥ç”¨å°±ä¼šå‡ºç°undefinedæˆ–è€…nullï¼ŒåŒæ—¶ï¼Œå› ä¸ºmountedçš„å‡½æ•°æ‰§è¡Œå®Œå°±ä¼šboomçš„æ²¡äº†ï¼ˆå‡½æ•°æ ˆè¿˜æ˜¯å†…å­˜çš„æ ˆå’Œå †çš„å…³ç³»ï¼‰ï¼Œæ‰€ä»¥ä½ éœ€è¦å®šä¹‰ä¸€ä¸ªå±æ€§å»æ¥æ”¶ä½ newå‡ºæ¥çš„betterScrollå¯¹è±¡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;Category&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">bs</span>: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bs</span> = <span class="keyword">new</span> <span class="title class_">BScroll</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.wrapper&#x27;</span>), &#123;</span><br><span class="line">      <span class="attr">probeType</span>: <span class="number">3</span>,</span><br><span class="line">      <span class="attr">pullUpLoad</span>: <span class="literal">true</span> <span class="comment">//è¯¥å±æ€§æ·»åŠ åï¼ŒprobeTypeçš„å€¼ç›´æ¥ä¸º3ï¼ˆä¿®æ”¹æˆåˆ«çš„ä¹Ÿæ²¡ç”¨ï¼‰</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">on</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="function">(<span class="params">position</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(position)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">on</span>(<span class="string">&#x27;pullingUp&#x27;</span>, <span class="function">()=&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¾¾åˆ°æœ€ä½äº†&#x27;</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">finishPullUp</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¥½å¥½äº«ç”¨å§</p>
<h2 id="å°è£…better-scroll"><a href="#å°è£…better-scroll" class="headerlink" title="å°è£…better-scroll"></a>å°è£…better-scroll</h2><p>Bç«™è€å¸ˆæœ‰ç€ç–¯ç‹‚çš„å°è£…æƒ³æ³•ï¼Œå“ˆå“ˆå“ˆå¼€ç©ç¬‘ï¼Œå…¶å®æ˜¯ä¸ºäº†é¡¹ç›®çš„åæœŸæ›´æ–°å’Œç»´æŠ¤ï¼Œæˆ‘ä»¬ä½¿ç”¨æ’ä»¶å‰ä¸€èˆ¬éƒ½æ˜¯å°†å…¶å°è£…å®Œåå†å»å„ä¸ªç»„ä»¶ä¸­ä½¿ç”¨ï¼Œé¿å…åé¢æ’ä»¶ä¸ç»´æŠ¤æ›´æ¢æ’ä»¶å¼•èµ·çš„ä»£ç ä¿®æ”¹å›°éš¾ï¼ˆå¯èƒ½è¦é¢ä¸´é‡æ„ï¼Œå¾ˆè‹¦çš„ï¼‰</p>
<p>æ ¹æ®ä¸Šé¢æ‰€å­¦çš„better-scrollï¼Œæˆ‘ä»¬ä¸ºå…¶å®šä¹‰æ‰€éœ€çš„åŸºæœ¬ç»“æ„ï¼Œåé¢åœ¨ä½¿ç”¨çš„æ—¶å€™å°±ç›´æ¥å¾€æ’æ§½æ·»åŠ æ ‡ç­¾å³å¯</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>å…¶å®ƒå’Œä¹‹å‰æ‰€è¿°vueç±»ä¼¼ï¼Œè¿™é‡Œå®šä¹‰ä¸¤ä¸ªpropå±æ€§probeTypeå’ŒpullUpLoadï¼Œä½¿ä½¿ç”¨bsçš„ç»„ä»¶å¯ä»¥è‡ªå®šä¹‰éœ€ä¸éœ€è¦å¼€å¯è¿™äº›åŠŸèƒ½ï¼ˆé¿å…ä¸å¿…è¦çš„è¿è¡Œç¼“æ…¢ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> &#123;</span><br><span class="line">       <span class="attr">bs</span>: <span class="literal">null</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">     <span class="attr">probeType</span>: &#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">       <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="attr">pullUpLoad</span>: &#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">       <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶å°†<code>scroll</code>å’Œ<code>pullingUp</code>äº‹ä»¶å‘é€å‡ºå»ï¼Œè®©ç»„ä»¶è‡ªå®šä¹‰éœ€è¦å®Œæˆçš„åŠŸèƒ½</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">bs</span> = <span class="keyword">new</span> <span class="title class_">BScroll</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">wrapper</span>, &#123;</span><br><span class="line">    <span class="attr">click</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">probeType</span>: <span class="variable language_">this</span>.<span class="property">probeType</span>,</span><br><span class="line">    <span class="attr">pullUpLoad</span>: <span class="variable language_">this</span>.<span class="property">pullUpLoad</span>,</span><br><span class="line">    <span class="attr">observeDOM</span>: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">//æ»šåŠ¨è¿‡ç¨‹å®æ—¶ç›‘å¬</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">on</span>(<span class="string">&quot;scroll&quot;</span>, <span class="function">(<span class="params">position</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$emit(<span class="string">&#x27;scroll&#x27;</span>, position)</span><br><span class="line">    </span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">//ç›‘å¬æ»šåŠ¨åˆ°åº•éƒ¨</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">on</span>(<span class="string">&quot;pullingUp&quot;</span>, <span class="function">()=&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$emit(<span class="string">&#x27;pullingUp&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°è£…scrollTo()å’ŒfinishPullUp()æ–¹æ³•ï¼Œè®©éœ€è¦çš„ç»„ä»¶è‡ªè¡Œè°ƒç”¨</p>
<p>è¿™é‡ŒscrollToä½¿ç”¨åˆ°ä¸‰ä¸ªå‚æ•°â†’x,y,timeï¼Œåˆ†åˆ«å¯¹åº”xåæ ‡ã€yåæ ‡ä»¥åŠæ»šåŠ¨çš„æ—¶é—´ï¼ˆå¹³æ»‘åº¦ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="comment">//è·³è½¬æŸä½ç½®</span></span><br><span class="line">  <span class="title function_">scrollTo</span>(<span class="params">x,y,time = <span class="number">666</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">scrollTo</span>(x,y,time)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//ç»§ç»­ä¸‹æ¬¡æ»šåŠ¨åˆ°åº•éƒ¨å“åº”</span></span><br><span class="line">  <span class="title function_">finishPullUp</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">finishPullUp</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°±æ˜¯åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨è¯¥ç»„ä»¶ï¼Œå¼•å…¥è¯¥ç»„ä»¶å¹¶æ·»åŠ åˆ°componentså¯¹è±¡ä¸­å°±å¯ä»¥ä½¿ç”¨å•¦</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scroll</span> <span class="attr">class</span>=<span class="string">&#x27;wrapper&#x27;</span> <span class="attr">:probe-type</span>=<span class="string">&quot;0&quot;</span> <span class="attr">:pull-up-load</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">home-swiper</span> <span class="attr">:banners</span>=<span class="string">&#x27;banners&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">home-swiper</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">home-recommend-view</span> <span class="attr">:recommends</span>=<span class="string">&quot;recommends&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">home-recommend-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feature-view</span>&gt;</span><span class="tag">&lt;/<span class="name">feature-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tab-control</span> <span class="attr">:titles</span>=<span class="string">&quot;[&#x27;æµè¡Œ&#x27;, &#x27;æ–°æ¬¾&#x27;, &#x27;ç²¾é€‰&#x27;]&quot;</span> <span class="attr">class</span>=<span class="string">&quot;tab&quot;</span> @<span class="attr">tabClick</span>=<span class="string">&quot;tabClick&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tab-control</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">goods-list</span> <span class="attr">:goods</span>=<span class="string">&quot;showGoods&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">goods-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰è®°å¾—ç»™wrapperä¸€ä¸ªé«˜åº¦ï¼Œç„¶åå°±æ˜¯ç›¸å…³æ ·å¼çš„ä¿®æ”¹ï¼Œè¿™é‡Œå­¦åˆ°äº†ä¸€ä¸ªæ–°çŸ¥è¯†ç‚¹ï¼Œè§†å£å•ä½ï¼ˆvhï¼‰ï¼Œidä¸ºhomeçš„æ ‡ç­¾é«˜åº¦è¦è®¾ç½®ä¸ºvhå•ä½æ‰èƒ½å®ç°è¯¥æ»šåŠ¨åŠŸèƒ½ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰è¿˜æœ‰è®¡ç®—çš„ï¼ˆcal(num1 - num2)ï¼‰ï¼Œè®°å¾—è¿ç®—ç¬¦å·¦å³éƒ½è¦æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ä¸ç”Ÿæ•ˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line">  #home &#123;</span><br><span class="line">    /* padding-top: 44px; */</span><br><span class="line">    /* è§†å£vh viewport height */</span><br><span class="line">    height: 100vh; </span><br><span class="line">    position: relative;</span><br><span class="line">  &#125;</span><br><span class="line">  .home-nav &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    right: 0;</span><br><span class="line">    color: white;</span><br><span class="line">    z-index: 10;</span><br><span class="line">    background-color: var(--color-tint);</span><br><span class="line">  &#125;</span><br><span class="line">  .tab-control &#123;</span><br><span class="line">    position: sticky;</span><br><span class="line">    top: 43px;</span><br><span class="line">    z-index: 10;</span><br><span class="line">  &#125;</span><br><span class="line">  .wrapper &#123;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 44px;</span><br><span class="line">    bottom: 49px;</span><br><span class="line">    left: 0;</span><br><span class="line">    right: 0;</span><br><span class="line">  &#125;</span><br><span class="line">/*   .wrapper &#123;</span><br><span class="line">    height: calc(100% - 93px);</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    margin-top: 44px;</span><br><span class="line">  &#125; */</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="å›åˆ°é¡¶éƒ¨BackTop"><a href="#å›åˆ°é¡¶éƒ¨BackTop" class="headerlink" title="å›åˆ°é¡¶éƒ¨BackTop"></a>å›åˆ°é¡¶éƒ¨BackTop</h2><p>è¿™é‡Œè¦åšä¸€ä¸ªå°åŠŸèƒ½ï¼Œé¡µé¢æ»šåŠ¨åˆ°ä¸€å®šç¨‹åº¦ä¼šå¼¹å‡ºå°æŒ‰é’®ï¼Œç‚¹å‡»è¯¥å°æŒ‰é’®å¯ä»¥å›åˆ°é¡¶éƒ¨</p>
<p>é¦–å…ˆåœ¨componentsçš„commoné‡Œæ–°å»ºä¸€ä¸ªbackTopæ–‡ä»¶å¤¹å­˜æ”¾backTopç»„ä»¶ï¼Œä»£ç æ¯”è¾ƒç®€å•ï¼Œéšå¿ƒæ‰€æ¬²æ­å»ºæ ·å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;backTop&quot;&gt;</span><br><span class="line">    &lt;img src=&quot;~assets/img/common/top.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &quot;BackTop&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .backTop &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    right: 10px;</span><br><span class="line">    bottom: 55px;</span><br><span class="line">  &#125;</span><br><span class="line">  .backTop img &#123;</span><br><span class="line">    width: 43px;</span><br><span class="line">    height: 43px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°±æ˜¯ç›¸å…³é€»è¾‘çš„å®ç°ï¼Œé¦–å…ˆè¦åœ¨ä¸»ç»„ä»¶ï¼ˆçˆ¶ç»„ä»¶ï¼‰ç»™backTopç»„ä»¶æ³¨å†Œç‚¹å‡»äº‹ä»¶ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ˜¯æ— æ³•ç›´æ¥ç»™åˆ›é€ çš„ç»„ä»¶åŠ¨æ€æ³¨å†Œç‚¹å‡»äº‹ä»¶çš„ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯backTopç»„ä»¶å†…éƒ¨æ³¨å†Œç‚¹å‡»äº‹ä»¶ï¼Œå†é€šè¿‡$emitå‘é€ç»™çˆ¶ç»„ä»¶ä½¿ç”¨ï¼Œç¬¬äºŒç§ç›´æ¥åœ¨çˆ¶ç»„ä»¶çš„backtopæ ‡ç­¾ä¸­<code>@click.native</code>ç›´æ¥ç»‘å®šäº‹ä»¶ï¼Œå¾ˆæ˜æ˜¾ï¼Œç¬¬äºŒç§æ–¹æ³•æ›´ç®€å•æ–¹ä¾¿ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">back-top</span> @<span class="attr">click.native</span>=<span class="string">&quot;backTopClick&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">back-top</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°±åœ¨çˆ¶ç»„ä»¶çš„methodsä¸­å®ç°è¯¥æ–¹æ³•ï¼Œåœ¨ä½¿ç”¨å‰ï¼Œæˆ‘ä»¬è¦é¦–å…ˆå¾—åˆ°scrollç»„ä»¶æ‰èƒ½å¯¹å…¶è¿›è¡Œæ»šåŠ¨æ“ä½œï¼Œæ“ä½œéå¸¸ç®€å•åœ¨scrollæ ‡ç­¾æ·»åŠ refå±æ€§å³å¯<code>ref=&quot;scroll&quot;</code> ï¼Œç„¶åå› ä¸ºä¸Šé¢å°è£…better-scrollçš„æ—¶å€™è€¶å°è£…äº†scrollToæ–¹æ³•ï¼Œæ‰€ä»¥ç›´æ¥å¯ä»¥é€šè¿‡<code>this.$refs.scroll</code>å¾—åˆ°è¯¥å¯¹è±¡åä½¿ç”¨è‡ªå·±å°è£…å¥½çš„scrollToæ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">backTopClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scroll</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å®ç°äº†ç‚¹å‡»å›åˆ°é¡¶éƒ¨çš„åŠŸèƒ½ï¼Œä½†è¿˜æœ‰ä¸€ä¸ªé€»è¾‘æ²¡å®ç°ï¼Œå®ƒæ˜¯æ»šåŠ¨åˆ°ä¸€å®šè·ç¦»æ‰ä¼šå®ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è¦é¦–å…ˆå®æ—¶å¾—åˆ°æˆ‘ä»¬å½“å‰æ»šåŠ¨çš„ä½ç½®</p>
<p>ä¸Šé¢å°è£…betterScrollå·²ç»å®šä¹‰äº†å‘å°„äº‹ä»¶scrolläº†ï¼Œè¿™é‡Œé€šè¿‡ç›‘å¬è¯¥äº‹ä»¶æ¥å®ç°å…·ä½“æ“ä½œï¼Œåœ¨scrollæ ‡ç­¾å®šä¹‰å±æ€§<code>@scroll=&quot;contentScroll&quot;</code>åŠ¨æ€æ³¨å†Œç‚¹å‡»äº‹ä»¶ï¼ŒåŒæ—¶ç»™back-topæ ‡ç­¾æ·»åŠ å±æ€§<code>v-show=&quot;backTopShow&quot;</code>ç”¨æ¥å†³å®šæ˜¾ç¤ºéšè—ï¼ŒbackTopShowé»˜è®¤ä¸ºfalseï¼Œå½“æ»šåŠ¨è¶…è¿‡ä¸€å®šè·ç¦»æ‰æ˜¾ç¤º</p>
<p>ç„¶åå°±æ˜¯å…·ä½“å®ç°ï¼Œå½“position.yå¤§äº1000æ—¶åˆ™æ˜¾ç¤ºï¼Œä½†å¦‚æœç»†å¿ƒçš„è¯ä¼šå‘ç°ï¼Œå®é™…çš„yå€¼æ˜¯è´Ÿçš„ï¼ˆå› ä¸ºæ˜¯å¾€ä¸Šæ»‘çš„å˜›ï¼‰æ‰€ä»¥åœ¨å…¶å‰é¢åŠ ä¸ª-å·</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">contentScroll</span>(<span class="params">position</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">backTopShow</span> = (-position.<span class="property">y</span>) &gt; <span class="number">1000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸Šæ‹‰åŠ è½½"><a href="#ä¸Šæ‹‰åŠ è½½" class="headerlink" title="ä¸Šæ‹‰åŠ è½½"></a>ä¸Šæ‹‰åŠ è½½</h2><p>åŒæ ·ä½¿ç”¨ä¸Šé¢å°è£…çš„pullingUpå‘å°„äº‹ä»¶ï¼Œæ¥ç»™scrollæ³¨å†Œäº‹ä»¶<code>@pullingUp=&quot;pulling&quot;</code></p>
<p>ç„¶åå…·ä½“å®ç°ï¼Œæ¯æ¬¡æ‹‰åˆ°æœ€ä½å°±è¯·æ±‚ä¸€æ¬¡æ•°æ®</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸Šæ‹‰åŠ è½½</span></span><br><span class="line"><span class="title function_">pulling</span>(<span class="params"></span>) &#123;</span><br><span class="line"> <span class="variable language_">this</span>.<span class="title function_">getHomeGoodss</span>(<span class="variable language_">this</span>.<span class="property">currentType</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¯·æ±‚å•†å“æ•°æ®å…·ä½“å®ç°ä¸­ï¼Œæ·»åŠ å¯å¤šæ¬¡ä¸‹æ‹‰åŠ è½½çš„ä»£ç ï¼Œå¹¶ä¸ºæ¯æ¬¡è¯·æ±‚å®Œå›¾ç‰‡åçš„å¼‚æ­¥æ“ä½œæ‰§è¡ŒåŠ¨æ€åˆ·æ–°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getHomeGoodss</span>(<span class="params">type</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> page = <span class="variable language_">this</span>.<span class="property">goods</span>[type].<span class="property">page</span> + <span class="number">1</span></span><br><span class="line">  <span class="title function_">getHomeGoods</span>(type, page).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">goods</span>[type].<span class="property">list</span>.<span class="title function_">push</span>(...res.<span class="property">data</span>.<span class="property">list</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">goods</span>[type].<span class="property">page</span> +=<span class="number">1</span></span><br><span class="line">    <span class="comment">//å¤šæ¬¡ä¸Šæ‹‰åŠ è½½</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scroll</span>.<span class="title function_">finishPullUp</span>()</span><br><span class="line">    <span class="comment">//åŠ¨æ€åˆ·æ–°</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scroll</span>.<span class="property">bs</span>.<span class="title function_">refresh</span>()</span><br><span class="line">  &#125;)         </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸ºä»€ä¹ˆè¦åŠ¨æ€åˆ·æ–°ï¼ŒåŸå› æ˜¯better-scrollï¼ˆä»¥ä¸‹ç®€ç§°BSï¼‰ä¼šè®¡ç®—å®ƒè¦æ»šåŠ¨çš„æ•°æ®é¡µé•¿åº¦ï¼Œç„¶åå®šä¸‹æ¥ï¼Œæ¯”å¦‚å¤šä¸ªå•†å“æ•°æ®åŠ èµ·æ¥ä¸€å…±1000pxï¼Œä½†æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™å›¾ç‰‡è¿˜æ²¡æœ‰è¯·æ±‚è¿‡æ¥ï¼ˆå¼‚æ­¥è¯·æ±‚ï¼‰ï¼Œæ‰€ä»¥è¿™1000pxä¸­æ˜¯æ²¡æœ‰åŒ…æ‹¬å›¾ç‰‡çš„é•¿åº¦çš„ï¼Œæ‰€ä»¥åœ¨å¼‚æ­¥è¯·æ±‚å®Œå›¾ç‰‡åï¼ŒåŸæœ¬æ˜¯1000pxçš„é•¿åº¦å¯èƒ½å°±å˜æˆ2000pxï¼Œä½†æ˜¯BSæ˜¯ä¸ä¼šå»æ”¹å˜å…¶å€¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å°±åªèƒ½åˆ·1000pxï¼Œç„¶åå°±æ»šä¸ä¸‹å»ï¼Œæ‰€ä»¥æ·»åŠ refresh()æ–¹æ³•æ˜¯ä¸ºäº†åŠ¨æ€åˆ·æ–°ï¼Œæ¯æ¬¡æœ‰å˜åŠ¨å°±åŠ¨æ€åˆ·æ–°ä¸€éï¼Œä½¿å¾—æ•°æ®æ­£å¸¸æ˜¾ç¤º</p>
<h2 id="better-scrollä¼˜åŒ–"><a href="#better-scrollä¼˜åŒ–" class="headerlink" title="better-scrollä¼˜åŒ–"></a>better-scrollä¼˜åŒ–</h2><p>ä¸Šæ‹‰åŠ è½½åšå®Œåï¼Œå¶å°”ä¼šå‘ç°bugå‡ºç°â€”â€”ä¸‹æ‹‰çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€å®šå‡ ç‡æ— æ³•ä¸‹æ‹‰ï¼Œä¸èƒ½æ­£å¸¸çš„åŠ è½½å‡ºå›¾ç‰‡ï¼ˆå’Œä¸Šé¢çš„åŠ¨æ€åˆ·æ–°åŒç†ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œå¯¹åŠ¨æ€åˆ·æ–°è¿›ä¸€æ­¥ä¼˜åŒ–â€“å³åœ¨åŠ è½½å®Œå›¾ç‰‡åè¿›è¡Œbsåˆ·æ–°</p>
<blockquote>
<p>é¦–å…ˆå¯ä»¥çœ‹çœ‹å½“å‰å¯æ»šåŠ¨é¡µé¢çš„é•¿åº¦ï¼Œé€šè¿‡å®ä¾‹åŒ–åçš„better-scrollçš„<code>scrollerHeight</code>å±æ€§æŸ¥çœ‹</p>
</blockquote>
<ol>
<li><p>ç›‘å¬GoodsListItemç»„ä»¶ä¸­çš„imageå›¾ç‰‡åŠ è½½äº‹ä»¶å¹¶å‘é€å‡ºå»</p>
<p>psï¼šåŸç”Ÿç›‘å¬åŠ è½½äº‹ä»¶ï¼š<code>el.onload = function() &#123;&#125;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;goods-item&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;itemClick&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;goodsItem.show.img&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> @<span class="attr">load</span>=<span class="string">&quot;imageLoad&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;goods-info&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;goodsItem.title&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span>&#123;&#123;goodsItem.price&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;collect&quot;</span>&gt;</span>&#123;&#123;goodsItem.cfav&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">imageLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.$emit(<span class="string">&#x27;itemImageLoad&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>éçˆ¶å­ç»„ä»¶é€šä¿¡é—®é¢˜</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦è·å–æ¯ä¸ªitemImageçš„åŠ è½½äº‹ä»¶ï¼Œå…¶ä¸homeçˆ¶ç»„ä»¶çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæœ‰ç‚¹ä¸‘ï¼‰</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2021/03/02/4.%E9%A6%96%E9%A1%B5%E4%B8%8B-BetterScroll/image-20210126215510747.png" alt="image-20210126215510747"></p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦åœ¨homeæ“ä½œGoodsListItemï¼Œè¿™å’‹åŠï¼Œè®©itemå‘é€ç­‰å¾…äº‹ä»¶ç»™GoodsListç»„ä»¶ï¼Œå†é€šè¿‡GoodsListç»„ä»¶å‘ç»™Homeå—ï¼Œè¿™çœ‹èµ·æ¥æ„Ÿè§‰æœ‰ç‚¹éº»çƒ¦ä¼šä¸ä¼šï¼Œé‚£é€šè¿‡vueXå¯ä»¥ä¸ï¼Œå¯ä»¥å•Šï¼Œä¸é”™çš„ï¼Œä½†æ˜¯è¿™é‡Œè¦æå¦ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œvueæä¾›çš„<code>äº‹ä»¶æ€»çº¿</code>(å¦‚ä¸‹å›¾æ‰€ç¤º)æ¥è§£å†³è¯¥é—®é¢˜</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2021/03/02/4.%E9%A6%96%E9%A1%B5%E4%B8%8B-BetterScroll/image-20210126215433792.png" alt="image-20210126215433792"></p>
<p>ä¸‹é¢æ˜¯å…·ä½“çš„ä»£ç è§£å†³æ–¹æ¡ˆ</p>
<p>ç¬¬ä¸€æ­¥å³æ˜¯åœ¨main.jsä¸­åˆå§‹åŒ–äº‹ä»¶æ€»çº¿ï¼ˆ$busï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="keyword">new</span> <span class="title class_">Vue</span>()</span><br></pre></td></tr></table></figure>
<p>æ¥ç€ï¼Œä¿®æ”¹ä¹‹å‰çš„å‘é€äº‹ä»¶ï¼Œå³GoodsListItemç»„ä»¶ä¸­çš„imageå›¾ç‰‡åŠ è½½äº‹ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">imageLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$bus</span>.$emit(<span class="string">&#x27;itemImageLoad&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œè®©æˆ‘ä»¬å›åˆ°scroll.vueä¸­ï¼Œä¸ºäº†é¿å…å›¾ç‰‡æ•°æ®å·²ç»è¿‡æ¥è€Œè¿™æ—¶å€™çš„scrollç»„ä»¶è¿˜æœªåˆ›å»ºå®Œæˆï¼Œä»è€Œå¯¼è‡´è¯¥scrollå®ä¾‹çš„æ–¹æ³•è°ƒç”¨å¤±è´¥ã€‚æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¦åˆ¤æ–­è¯¥ç»„ä»¶methodsä¸­çš„æ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™scrollæ˜¯å¦å·²ç»åˆ›å»ºï¼Œå¦‚æœåˆ›å»ºçš„è¯å†å»è°ƒç”¨å…¶å†…éƒ¨æ–¹æ³•ï¼ˆåˆ©ç”¨&amp;&amp;é€»è¾‘ä¸è¿›è¡Œåˆ¤æ–­ï¼‰å¦‚ä¸‹ä»£ç æ‰€ç¤º</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">     <span class="comment">//è·³è½¬æŸä½ç½®</span></span><br><span class="line">     <span class="title function_">scrollTo</span>(<span class="params">x,y,time = <span class="number">666</span></span>) &#123;</span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">bs</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">scrollTo</span>(x,y,time)</span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="comment">//åˆ·æ–°</span></span><br><span class="line">     <span class="title function_">refresh</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">bs</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">refresh</span>()</span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="comment">//å®Œæˆåº•éƒ¨æ»šåŠ¨</span></span><br><span class="line">     <span class="title function_">finishPullUp</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">bs</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">finishPullUp</span>()</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨homeç»„ä»¶ä¸­ä½¿ç”¨è¯¥äº‹ä»¶ï¼ˆè¿™é‡Œæ˜¯åœ¨mountedä¸­å»è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆä¸åœ¨createdä¸­å‘¢ï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ—¶å€™çš„å„ä¸ªç»„ä»¶è¿˜æœªåˆ›å»ºå®Œæˆï¼Œå¯èƒ½ä¼šå¯¼è‡´æ‰§è¡Œå¤±è´¥ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;itemImageLoad&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scroll</span>.<span class="title function_">refresh</span>()</span><br><span class="line">&#125;)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œåœ¨æ¯æ¬¡çš„å›¾ç‰‡åŠ è½½åé¡µé¢ä¾¿ä¼šåˆ·æ–°ä¸€æ¬¡</p>
</li>
</ol>
<h2 id="debounce-é˜²æŠ–"><a href="#debounce-é˜²æŠ–" class="headerlink" title="debounce(é˜²æŠ–)"></a>debounce(é˜²æŠ–)</h2><p>è¿™é‡Œå¯¹ä¸Šè¿°æ“ä½œåšä¸€ä¸ªé˜²æŠ–å¤„ç†ï¼ˆJSé«˜çº§â†’æå‡æ€§èƒ½ï¼‰ï¼Œå› ä¸ºæ¯æ¬¡åŠ è½½ä¸€å¼ å›¾ç‰‡å°±è¦åšä¸€æ¬¡bsåˆ·æ–°ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹æµªè´¹æ€§èƒ½ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½åœ¨åŠ è½½ä¸€å®šæ•°é‡çš„å›¾ç‰‡åå†åˆ·æ–°ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å°è£…ä¸€ä¸ªé˜²æŠ–å‡½æ•°debounce(func,delay)ï¼Œå‡½æ•°çš„æ€è·¯æ˜¯æä¾›ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰§è¡Œçš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¾¿æ˜¯è§„å®šçš„æ—¶é—´ï¼ˆå³æ£€æµ‹è¯¥å‡½æ•°åœ¨è¯¥æ—¶é—´å†…æ˜¯å¦åˆéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼Œæ˜¯åˆ™é‡ç½®æ—¶é—´ï¼‰ï¼Œæˆ‘ä»¬åœ¨commonæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªultis.jsæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼ˆä½ éœ€è¦æŒæ¡ä»¥ä¸‹jsåŸç”Ÿå‡½æ•°setTimeOut()ã€clearTimeOut()ã€apply()ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°çš„æ€è·¯"><a href="#å‡½æ•°çš„æ€è·¯" class="headerlink" title="å‡½æ•°çš„æ€è·¯"></a>å‡½æ•°çš„æ€è·¯</h3><p>é¦–å…ˆä½ è¦å®šä¹‰ä¸€ä¸ªå˜é‡æ¥æ”¶è¯¥å‡½æ•°è¿”å›å€¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> func = <span class="title function_">debounce</span>(func, delay)</span><br><span class="line"><span class="title function_">func</span>(args1,args2) <span class="comment">//æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åè¯¥å‡½æ•°æ‰§è¡Œæ€è·¯å¦‚ä¸‹</p>
<ol>
<li>ä¼ å…¥ä¸€ä¸ªéœ€è¦çš„æ‰§è¡Œå‡½æ•°funcï¼ˆæ³¨æ„ä¸è¦åŠ ()ï¼Œå› ä¸ºéœ€è¦çš„æ˜¯ä¸€ä¸ªå˜é‡ï¼Œä¸ç„¶ä½ ä¼ è¿›å»çš„å°±æ˜¯å‡½æ•°çš„è¿”å›å€¼äº†ï¼‰å’Œä¸€ä¸ªæ—¶é—´delay</li>
<li>å†…éƒ¨å‡½æ•°timeråˆå§‹å€¼ä¸ºnull</li>
<li>è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„funcï¼ŒåŒæ—¶ä½¿ç”¨è§£æ„èµ‹å€¼ï¼ˆâ€¦argsï¼‰å°†funcdå‚æ•°æ¥æ”¶</li>
<li>è¿”å›çš„å‡½æ•°å†…éƒ¨è¿›è¡Œåˆ¤æ–­ï¼Œè®¾ç½®ä¸€ä¸ªä½ å¼€å§‹èµ‹äºˆdelayçš„å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨å¯åŠ¨ï¼Œåœ¨è¯¥æ—¶é—´åæ‰§è¡Œä½ ä¼ å…¥çš„å‡½æ•°ï¼ˆfunc.apply(this, args)ï¼‰ï¼Œå¦‚è‹¥è¿™æ—¶å€™ä½ åˆéœ€è¦æ‰§è¡Œä¸€æ¬¡è¯¥å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™timerå°±ä¼šæœ‰å€¼ï¼Œä»è€Œæ‰§è¡ŒclearTimeOutå‡½æ•°æ¸…é™¤å®šæ—¶å™¨,é‡æ–°å¼€å§‹è®¡æ—¶ï¼Œå¦‚æ­¤åå¤ä¸‹å»è¿›è¡Œåˆ¤æ–­ï¼Œç›´åˆ°è¶…è¿‡è¯¥æ—¶é—´æˆ–æ˜¯ä¸å†æœ‰é‡å¤çš„æ‰§è¡Œå‡½æ•°è¿›æ¥</li>
<li>æ³¨æ„ï¼šè¯¥é˜²æŠ–åªæ˜¯é˜²æ­¢é¢‘ç¹æ‰§è¡Œï¼Œå¹¶ä¸ä¿è¯é¢‘ç¹æ‰§è¡Œæ¬¡æ•°ä¼šåŒ–ä¸ºä¸€æ¬¡ï¼Œå¦‚æœè¶…è¿‡è¯¥æ—¶é—´ï¼Œåˆ™ä¼šå¢åŠ ä¸€æ¬¡æ‰§è¡Œæ¬¡æ•°</li>
</ol>
<h3 id="é¡¹ç›®çš„ä½¿ç”¨"><a href="#é¡¹ç›®çš„ä½¿ç”¨" class="headerlink" title="é¡¹ç›®çš„ä½¿ç”¨"></a>é¡¹ç›®çš„ä½¿ç”¨</h3><p>é¦–å…ˆå¯¼å…¥è¯¥æ¨¡å—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é˜²æŠ–æ“ä½œ</span></span><br><span class="line"><span class="keyword">import</span> &#123;debounce&#125; <span class="keyword">from</span> <span class="string">&#x27;common/utils.js&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> refresh = <span class="title function_">debounce</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scroll</span>.<span class="property">refresh</span>, <span class="number">500</span>) <span class="comment">//æ³¨æ„ä¸è¦åŠ æ‹¬å·ï¼Œå¦åˆ™ä¼ å…¥çš„æ˜¯å‡½æ•°è¿”å›å€¼</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;itemImageLoad&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">refresh</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="scrollå‚æ•°å‡½æ•°ä¼˜åŒ–"><a href="#scrollå‚æ•°å‡½æ•°ä¼˜åŒ–" class="headerlink" title="scrollå‚æ•°å‡½æ•°ä¼˜åŒ–"></a>scrollå‚æ•°å‡½æ•°ä¼˜åŒ–</h2><p>ä½¿ç”¨ifè¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­è®¾ç½®å‚æ•°æ˜¯å¦ç¬¦åˆå‡½æ•°çš„æ‰§è¡Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">bs</span> = <span class="keyword">new</span> <span class="title class_">BScroll</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">wrapper</span>, &#123;</span><br><span class="line">    <span class="attr">click</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">probeType</span>: <span class="variable language_">this</span>.<span class="property">probeType</span>,</span><br><span class="line">    <span class="attr">pullUpLoad</span>: <span class="variable language_">this</span>.<span class="property">pullUpLoad</span>,</span><br><span class="line">    <span class="attr">observeDOM</span>: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">//æ»šåŠ¨è¿‡ç¨‹å®æ—¶ç›‘å¬</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">probeType</span> === <span class="number">2</span> || <span class="variable language_">this</span>.<span class="property">probeType</span> === <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">on</span>(<span class="string">&quot;scroll&quot;</span>, <span class="function">(<span class="params">position</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;scroll&#x27;</span>, position)</span><br><span class="line">      </span><br><span class="line">    &#125;)        </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//ç›‘å¬æ»šåŠ¨åˆ°åº•éƒ¨</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">pullUpLoad</span> === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="title function_">on</span>(<span class="string">&quot;pullingUp&quot;</span>, <span class="function">()=&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;pullingUp&#x27;</span>)</span><br><span class="line">    &#125;)        </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¸é¡¶æ•ˆæœ"><a href="#å¸é¡¶æ•ˆæœ" class="headerlink" title="å¸é¡¶æ•ˆæœ"></a>å¸é¡¶æ•ˆæœ</h2><p>é¡¹ç›®è¿›è¡Œåˆ°è¿™é‡Œï¼Œä½ ä¼šå‘ç°ï¼Œä¹‹å‰ç»™tab-controlè®¾ç½®çš„csså¸é¡¶æ•ˆæœå¤±æ•ˆäº†ï¼Œä¹Ÿå°±æ˜¯<code>position:sticky</code>å¤±æ•ˆäº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦ç”¨jsçš„æ–¹å¼å®ç°å¸é¡¶æ•ˆæœï¼Œæ€è·¯å¦‚ä¸‹</p>
<ol>
<li><p>æŒ‰ç…§å›¾ç‰‡åŠ è½½é€Ÿåº¦ï¼Œé€‰æ‹©åŠ è½½æœ€ä¹…çš„å“ªä¸ªå›¾ç‰‡è¿›è¡Œç›‘å¬loadäº‹ä»¶ï¼ˆè¿™é‡Œé€‰æ‹©swipeItemï¼‰ï¼Œå‘é€è¯¥äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img :src=&quot;item.image&quot; alt=&quot;&quot; @load=&quot;imgLoad&quot;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">imgLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$emit(<span class="string">&#x27;swipeImgLoad&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Homeç»‘å®šè¯¥äº‹ä»¶ï¼Œå½“ç›‘å¬åˆ°è¯¥å›¾ç‰‡åŠ è½½å®Œåï¼Œå¾—åˆ°TabControlä»¥ä¸Šçš„é«˜åº¦ï¼ˆ$el.offsetTopï¼‰å¹¶å­˜å‚¨åœ¨dataä¸­ï¼ˆtabOffsetTopï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¸é¡¶</span></span><br><span class="line"><span class="title function_">swipeImgLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">tabOffset</span> = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">tabControl2</span>.<span class="property">$el</span>.<span class="property">offsetTop</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼ˆcontentScroll())ä¸­ç›‘å¬å½“å‰ä½ç½®æ˜¯å¦ä¸dataä¸­tabOffsetTopçš„å€¼ä¸€è‡´ï¼Œä¸€è‡´åˆ™å°†dataä¸­isTabFixedçš„å€¼æ”¹ä¸ºtrueï¼ˆè‡ªå·±æ·»åŠ ï¼Œé»˜è®¤ä¸ºfalseï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›‘å¬æ»šåŠ¨</span></span><br><span class="line"><span class="title function_">contentScroll</span>(<span class="params">position</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">backTopShow</span> = (-position.<span class="property">y</span>) &gt; <span class="number">1000</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">isTabfixed</span> = (-position.<span class="property">y</span>) &gt; <span class="variable language_">this</span>.<span class="property">tabOffset</span> <span class="comment">//åˆ¤æ–­æ˜¯å¦éœ€è¦å¸é¡¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>å¸é¡¶</p>
<ol>
<li>æ ¹æ®å±æ€§åŠ¨æ€æ”¹å˜tabControlçš„æ ·å¼ï¼ˆcss:fixedï¼Œ<strong>è¡Œä¸é€š</strong>ï¼Œå› ä¸ºå®ƒå¤„åœ¨better-scrollä¸­ï¼Œbetter-scrollä½¿ç”¨çš„æ˜¯cssçš„transfromå±æ€§ï¼Œæ²¡æœ‰æ•ˆæœï¼‰</li>
<li>å¤åˆ¶ä¸€ä»½tab-controlã€‚å°†å…¶ä¸scrollä¸­çš„contentè„±ç¦»ï¼ŒåŒæ—¶å°†csså±æ€§è®¾ç½®ä¸º<code>position:relative</code>å’Œ<code>index:10</code>ï¼Œä»¥æ˜¾ç¤ºåœ¨é¡¶éƒ¨</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div id=&quot;home&quot;&gt;</span><br><span class="line">   &lt;nav-bar class=&quot;home-nav&quot;&gt;&lt;div slot=&quot;center&quot;&gt;è´­ç‰©è¡—&lt;/div&gt;&lt;/nav-bar&gt;</span><br><span class="line">   &lt;tab-control </span><br><span class="line">     :titles=&quot;[&#x27;æµè¡Œ&#x27;, &#x27;æ–°æ¬¾&#x27;, &#x27;ç²¾é€‰&#x27;]&quot; </span><br><span class="line">     class=&quot;tab-control&quot; </span><br><span class="line">     @tabClick=&quot;tabClick&quot;</span><br><span class="line">     ref=&quot;tabControl1&quot;</span><br><span class="line">     v-show=&quot;isTabfixed&quot;&gt;&lt;/tab-control&gt;</span><br><span class="line">   &lt;scroll </span><br><span class="line">   class=&#x27;wrapper&#x27; </span><br><span class="line">   ref=&quot;scroll&quot; </span><br><span class="line">   :probe-type=&quot;3&quot; </span><br><span class="line">   @scroll=&quot;contentScroll&quot;</span><br><span class="line">   :pull-up-load=&quot;true&quot;</span><br><span class="line">   @pullingUp=&quot;pulling&quot;&gt;</span><br><span class="line">ã€‚ã€‚ã€‚</span><br><span class="line">   &lt;/scroll&gt;</span><br><span class="line">   &lt;back-top @click.native=&quot;backTopClick&quot; v-show=&quot;backTopShow&quot;&gt;&lt;/back-top&gt;</span><br><span class="line"> &lt;/div&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>ä½¿ç”¨v-showå†³å®šè„±ç¦»scrollçš„tab-controlæ˜¯å¦æ˜¾ç¤ºï¼ˆv-show=â€isTabFixedâ€ï¼‰</p>
</li>
<li><p>è§£å†³æ‹–åŠ¨è¿‡ç¨‹ä¸­ä¸¤ä¸ªtab-controlé€‰é¡¹ä¸åŒçš„é—®é¢˜ï¼šå°†å…¶refåˆ†åˆ«æ”¹ä¸ºtabControl1å’ŒtabControl2ï¼Œå¹¶åœ¨tabClickäº‹ä»¶ä¸­å°†ä¸¤ä¸ªçš„currentIndexæ”¹ä¸ºå½“å‰é€‰é¡¹index</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¦–é¡µæ•°æ®å¤„ç†</span></span><br><span class="line"><span class="title function_">tabClick</span>(<span class="params">index</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (index) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentType</span> = <span class="string">&#x27;pop&#x27;</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentType</span> = <span class="string">&#x27;new&#x27;</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentType</span> = <span class="string">&#x27;sell&#x27;</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">tabControl1</span>.<span class="property">currentIndex</span> = index</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">tabControl2</span>.<span class="property">currentIndex</span> = index</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è·³è½¬ä¿ç•™é¦–é¡µçŠ¶æ€"><a href="#è·³è½¬ä¿ç•™é¦–é¡µçŠ¶æ€" class="headerlink" title="è·³è½¬ä¿ç•™é¦–é¡µçŠ¶æ€"></a>è·³è½¬ä¿ç•™é¦–é¡µçŠ¶æ€</h2><p>æ ¸å¿ƒæ€è·¯ï¼šä½¿ç”¨keep-aliveæ ‡ç­¾è§£å†³å½“å‰é¡µé¢çŠ¶æ€ï¼Œä»¥åŠscroll.yä¿ç•™scrollå½“å‰ä½ç½®</p>
<p>åœ¨App.vueä¸­ä½¿ç”¨keep-aliveæ ‡ç­¾</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;keep-alive&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;      </span><br><span class="line">  &lt;/keep-alive&gt;   </span><br><span class="line">  &lt;main-tab-bar&gt;&lt;/main-tab-bar&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>å°è£…scrollçš„yä½ç½®å‡½æ•°ï¼ˆmethodsä¸­ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">toY</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">bs</span> ? <span class="variable language_">this</span>.<span class="property">bs</span>.<span class="property">y</span> : <span class="number">0</span></span><br><span class="line">d&#125;</span><br></pre></td></tr></table></figure>
<p>Homeç»„ä»¶ä¸­ï¼Œåœ¨ç»„ä»¶éæ´»è·ƒçŠ¶æ€ï¼ˆå³è·³è½¬å…¶å®ƒè·¯ç”±ï¼‰æ—¶ä¿ç•™å½“å‰ä½ç½®ï¼ˆdataå£°æ˜saveYå˜é‡æ¥æ”¶è¯¥ä½ç½®ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">deactivated</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">saveY</span> = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scroll</span>.<span class="title function_">toY</span>()</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ç»„ä»¶æ´»è·ƒï¼ˆå³è·¯ç”±æ¢å¤è‡³é¦–é¡µï¼‰æ—¶ï¼Œè·³è½¬ä¹‹å‰ä¿ç•™çš„ä½ç½®ä¿¡æ¯å¹¶å†æ¬¡åˆ·æ–°ï¼ˆé¿å…å¼‚å¸¸å¡é¡¿ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">activated</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scroll</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>,<span class="variable language_">this</span>.<span class="property">saveY</span>,<span class="number">1000</span>)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">scroll</span>.<span class="title function_">refresh</span>()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å½“ç„¶ï¼Œè¿™ä¸€åˆ‡ï¼Œåœ¨better-scroll2.0æ˜¯ä¸éœ€è¦åšçš„ï¼Œå®ƒå·²ç»å¸®æˆ‘ä»¬åšå¥½äº†ï¼Œhiahiahia</p>
</blockquote>
</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://Dong-666.github.io">å¤©é™…çº¿ä¸Šçš„çŒª</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://dong-666.github.io/2021/03/02/4.%E9%A6%96%E9%A1%B5%E4%B8%8B-BetterScroll/">http://dong-666.github.io/2021/03/02/4.%E9%A6%96%E9%A1%B5%E4%B8%8B-BetterScroll/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://Dong-666.github.io" target="_blank">Dong</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue/">Vue</a><a class="post-meta__tags" href="/tags/Vue%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%95%86%E5%9F%8E/">Vueç§»åŠ¨ç«¯å•†åŸ</a></div><div class="post_share"><div class="social-share" data-image="/img/code.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>èµåŠ©</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/wechat.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/03/02/5.%E8%AF%A6%E6%83%85%E9%A1%B5%E4%B8%8A/" title="5.è¯¦æƒ…é¡µä¸Š"><img class="cover" src="/img/code.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">5.è¯¦æƒ…é¡µä¸Š</div></div></a></div><div class="next-post pull-right"><a href="/2021/03/02/3.%E9%A6%96%E9%A1%B5%E4%B8%AD/" title="3.é¦–é¡µä¸­"><img class="cover" src="/img/code.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">3.é¦–é¡µä¸­</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2021/03/02/1.%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%B7%A5%E4%BD%9C/" title="1.é¡¹ç›®åˆå§‹å·¥ä½œ"><img class="cover" src="/img/code.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-02</div><div class="title">1.é¡¹ç›®åˆå§‹å·¥ä½œ</div></div></a></div><div><a href="/2021/03/02/10.%E8%A7%A3%E5%86%B3%E7%A7%BB%E5%8A%A8%E7%AB%AF300ms%E5%BB%B6%E8%BF%9F(fastClick)/" title="10.è§£å†³ç§»åŠ¨ç«¯300mså»¶è¿Ÿ"><img class="cover" src="/img/code.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-02</div><div class="title">10.è§£å†³ç§»åŠ¨ç«¯300mså»¶è¿Ÿ</div></div></a></div><div><a href="/2021/03/02/11.vue-lazyload%EF%BC%88%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD%EF%BC%89/" title="11.vue-lazyloadï¼ˆå›¾ç‰‡æ‡’åŠ è½½ï¼‰"><img class="cover" src="/img/code.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-02</div><div class="title">11.vue-lazyloadï¼ˆå›¾ç‰‡æ‡’åŠ è½½ï¼‰</div></div></a></div><div><a href="/2021/03/02/13.%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" title="13.é¡¹ç›®éƒ¨ç½²"><img class="cover" src="/img/code.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-02</div><div class="title">13.é¡¹ç›®éƒ¨ç½²</div></div></a></div><div><a href="/2021/03/02/2.%E9%A6%96%E9%A1%B5%E4%B8%8A/" title="2.é¦–é¡µä¸Š"><img class="cover" src="/img/code.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-02</div><div class="title">2.é¦–é¡µä¸Š</div></div></a></div><div><a href="/2021/03/02/3.%E9%A6%96%E9%A1%B5%E4%B8%AD/" title="3.é¦–é¡µä¸­"><img class="cover" src="/img/code.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-02</div><div class="title">3.é¦–é¡µä¸­</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div><div class="comment-switch"><span class="first-comment">Valine</span><span id="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">å¤©é™…çº¿ä¸Šçš„çŒª</div><div class="author-info__description">è®°å½•ç”Ÿæ´»ï¼Œè®°å½•å­¦ä¹ </div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">106</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">14</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Dong-666"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Dong-666" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="tencent://message/?uin=2834471179&amp;Site=&amp;Menu=yes" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">å“‡ï¼Œä½ å±…ç„¶å‘ç°äº†è¿™ä¸ªå®è—åšå®¢ï¼</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Better-scroll%E4%BD%BF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">Better-scrollä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#html%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">htmlä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">vueä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85better-scroll"><span class="toc-number">2.</span> <span class="toc-text">å°è£…better-scroll</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E5%88%B0%E9%A1%B6%E9%83%A8BackTop"><span class="toc-number">3.</span> <span class="toc-text">å›åˆ°é¡¶éƒ¨BackTop</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD"><span class="toc-number">4.</span> <span class="toc-text">ä¸Šæ‹‰åŠ è½½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#better-scroll%E4%BC%98%E5%8C%96"><span class="toc-number">5.</span> <span class="toc-text">better-scrollä¼˜åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#debounce-%E9%98%B2%E6%8A%96"><span class="toc-number">6.</span> <span class="toc-text">debounce(é˜²æŠ–)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="toc-number">6.1.</span> <span class="toc-text">å‡½æ•°çš„æ€è·¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">6.2.</span> <span class="toc-text">é¡¹ç›®çš„ä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scroll%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0%E4%BC%98%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">scrollå‚æ•°å‡½æ•°ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%B8%E9%A1%B6%E6%95%88%E6%9E%9C"><span class="toc-number">8.</span> <span class="toc-text">å¸é¡¶æ•ˆæœ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%B3%E8%BD%AC%E4%BF%9D%E7%95%99%E9%A6%96%E9%A1%B5%E7%8A%B6%E6%80%81"><span class="toc-number">9.</span> <span class="toc-text">è·³è½¬ä¿ç•™é¦–é¡µçŠ¶æ€</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/09/10/XSS/" title="Webå®‰å…¨-XSS"><img src="/img/code.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Webå®‰å…¨-XSS"/></a><div class="content"><a class="title" href="/2022/09/10/XSS/" title="Webå®‰å…¨-XSS">Webå®‰å…¨-XSS</a><time datetime="2022-09-10T07:28:20.000Z" title="å‘è¡¨äº 2022-09-10 15:28:20">2022-09-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/15/%E9%87%8D%E5%9B%9E%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E9%97%AD%E5%8C%85/" title="é‡å›ä½œç”¨åŸŸå’Œé—­åŒ…"><img src="/img/code.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="é‡å›ä½œç”¨åŸŸå’Œé—­åŒ…"/></a><div class="content"><a class="title" href="/2022/05/15/%E9%87%8D%E5%9B%9E%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E9%97%AD%E5%8C%85/" title="é‡å›ä½œç”¨åŸŸå’Œé—­åŒ…">é‡å›ä½œç”¨åŸŸå’Œé—­åŒ…</a><time datetime="2022-05-14T16:00:00.000Z" title="å‘è¡¨äº 2022-05-15 00:00:00">2022-05-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/22/CSRF/" title="Webå®‰å…¨-CSRF"><img src="/img/code.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Webå®‰å…¨-CSRF"/></a><div class="content"><a class="title" href="/2022/04/22/CSRF/" title="Webå®‰å…¨-CSRF">Webå®‰å…¨-CSRF</a><time datetime="2022-04-22T07:28:20.000Z" title="å‘è¡¨äº 2022-04-22 15:28:20">2022-04-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/18/NPM%20%E6%93%8D%E4%BD%9C/" title="npmæ“ä½œ"><img src="/img/code.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="npmæ“ä½œ"/></a><div class="content"><a class="title" href="/2022/04/18/NPM%20%E6%93%8D%E4%BD%9C/" title="npmæ“ä½œ">npmæ“ä½œ</a><time datetime="2022-04-18T07:00:00.000Z" title="å‘è¡¨äº 2022-04-18 15:00:00">2022-04-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/15/node-token%E7%99%BB%E9%99%86%E6%B3%A8%E5%86%8C%E9%AA%8C%E8%AF%81/" title="nodeç™»é™†éªŒè¯ä¹‹jsonwebtoken"><img src="/img/code.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nodeç™»é™†éªŒè¯ä¹‹jsonwebtoken"/></a><div class="content"><a class="title" href="/2022/04/15/node-token%E7%99%BB%E9%99%86%E6%B3%A8%E5%86%8C%E9%AA%8C%E8%AF%81/" title="nodeç™»é™†éªŒè¯ä¹‹jsonwebtoken">nodeç™»é™†éªŒè¯ä¹‹jsonwebtoken</a><time datetime="2022-04-15T13:40:39.000Z" title="å‘è¡¨äº 2022-04-15 21:40:39">2022-04-15</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/code.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By å¤©é™…çº¿ä¸Šçš„çŒª</div><div class="footer_custom_text">Hi, Welcome to my blog</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'K4oel47dX9gLB9DECHDKW5HF-gzGzoHsz',
      appKey: 'FI26zV0So19K2wVMY6Ds4nAA',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: {"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_äº²äº²":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_å·ç¬‘":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_å†è§":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_å†·æ¼ ":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_å‘æ€’":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_å‘è´¢":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_å¯çˆ±":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_åè¡€":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_å‘†":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_å‘•å":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_å›°":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_åç¬‘":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_å¤§ä½¬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_å¤§å“­":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_å§”å±ˆ":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_å®³ç¾":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_å°´å°¬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_å¾®ç¬‘":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_æ€è€ƒ":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_æƒŠå“":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png"},
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><script>(() => {
  const disqus_config = function () {
    this.page.url = 'http://dong-666.github.io/2021/03/02/4.%E9%A6%96%E9%A1%B5%E4%B8%8B-BetterScroll/'
    this.page.identifier = '/2021/03/02/4.%E9%A6%96%E9%A1%B5%E4%B8%8B-BetterScroll/'
    this.page.title = '4.é¦–é¡µä¸‹BetterScroll'
  }

  const disqusReset = () => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addGlobalFn('themeChange', disqusReset, 'disqus')

  const loadDisqus = () =>{
    if (window.DISQUS) disqusReset()
    else {
      const script = document.createElement('script')
      script.src = 'https://.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if ('Valine' === 'Disqus' || !false) {
    if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      GLOBAL_CONFIG_SITE.isPost && getCount()
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>